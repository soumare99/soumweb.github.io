<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SOUMWEB | Apprentissage Ultime avec IA</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');
        
        :root {
            --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            --success-gradient: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            --warning-gradient: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
            --danger-gradient: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
            --info-gradient: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            
            --shadow-soft: 0 10px 40px rgba(0,0,0,0.1);
            --shadow-medium: 0 20px 60px rgba(0,0,0,0.15);
            --shadow-strong: 0 30px 80px rgba(0,0,0,0.2);
            
            --border-radius: 20px;
            --border-radius-lg: 30px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            line-height: 1.6;
            color: #2d3748;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            overflow-x: hidden;
        }

        /* Dark mode support */
        .dark {
            background: linear-gradient(135deg, #1a202c 0%, #2d3748 100%);
            color: #e2e8f0;
        }

        /* Custom animations */
        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes pulse-soft {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }

        @keyframes slide-in {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes gradient-shift {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .animate-float { animation: float 3s ease-in-out infinite; }
        .animate-pulse-soft { animation: pulse-soft 2s ease-in-out infinite; }
        .animate-slide-in { animation: slide-in 0.6s ease-out; }
        .animate-gradient { 
            background-size: 200% 200%;
            animation: gradient-shift 3s ease infinite;
        }

        /* Header styles */
        header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .logo {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(45deg, #ff6b6b, #4ecdc4, #45b7d1);
            background-size: 200% 200%;
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: gradient-shift 3s ease infinite;
        }

        .nav-links a {
            position: relative;
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        /* Hero section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            color: white;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: float 20s linear infinite;
        }

        .hero-content {
            position: relative;
            z-index: 2;
            max-width: 800px;
            padding: 2rem;
        }

        .hero h1 {
            font-size: 4rem;
            font-weight: 800;
            margin-bottom: 1rem;
            text-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .hero p {
            font-size: 1.3rem;
            margin-bottom: 2rem;
            background: rgba(255, 255, 255, 0.1);
            padding: 1.5rem;
            border-radius: var(--border-radius);
            backdrop-filter: blur(10px);
        }

        /* Button styles */
        .btn {
            display: inline-block;
            padding: 1rem 2rem;
            border-radius: var(--border-radius-lg);
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
            box-shadow: var(--shadow-medium);
            border: none;
            cursor: pointer;
            font-size: 1rem;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
            transition: all 0.5s ease;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-strong);
        }

        .btn-primary {
            background: var(--primary-gradient);
            color: white;
        }

        .btn-success {
            background: var(--success-gradient);
            color: white;
        }

        .btn-warning {
            background: var(--warning-gradient);
            color: white;
        }

        .btn-danger {
            background: var(--danger-gradient);
            color: white;
        }

        .btn-info {
            background: var(--info-gradient);
            color: white;
        }

        .btn-secondary {
            background: var(--secondary-gradient);
            color: white;
        }

        /* Section styles */
        .section {
            padding: 6rem 2rem;
            position: relative;
        }

        .section-container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: var(--border-radius-lg);
            padding: 3rem;
            box-shadow: var(--shadow-medium);
            backdrop-filter: blur(10px);
        }

        .dark .section-container {
            background: rgba(45, 55, 72, 0.95);
            color: #e2e8f0;
        }

        .section-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .section-title {
            font-size: 3rem;
            font-weight: 800;
            margin-bottom: 1rem;
            background: var(--primary-gradient);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .section-subtitle {
            font-size: 1.2rem;
            color: #64748b;
            max-width: 600px;
            margin: 0 auto;
        }

        .dark .section-subtitle {
            color: #a0aec0;
        }

        /* Card styles */
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 2rem;
            margin-top: 3rem;
        }

        .card {
            background: white;
            border-radius: var(--border-radius);
            padding: 2rem;
            box-shadow: var(--shadow-soft);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .dark .card {
            background: #2d3748;
            color: #e2e8f0;
        }

        .card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: var(--primary-gradient);
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: var(--shadow-strong);
        }

        .card-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 1.5rem;
            position: relative;
        }

        .card-icon.conjugaison {
            background: var(--success-gradient);
            color: white;
        }

        .card-icon.orthographe {
            background: var(--warning-gradient);
            color: white;
        }

        .card-icon.grammaire {
            background: var(--info-gradient);
            color: white;
        }

        .card-icon.vocabulaire {
            background: var(--danger-gradient);
            color: white;
        }

        .card-icon.ia {
            background: var(--secondary-gradient);
            color: white;
        }

        .card h3 {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: #2d3748;
        }

        .dark .card h3 {
            color: #e2e8f0;
        }

        .card p {
            color: #64748b;
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .dark .card p {
            color: #a0aec0;
        }

        /* Interactive elements */
        .quiz-container {
            background: linear-gradient(135deg, #f8faff 0%, #e6f3ff 100%);
            border-radius: var(--border-radius);
            padding: 2rem;
            margin: 2rem 0;
            border: 1px solid rgba(79, 172, 254, 0.2);
        }

        .dark .quiz-container {
            background: linear-gradient(135deg, #2d3748 0%, #4a5568 100%);
            border-color: rgba(79, 172, 254, 0.3);
        }

        .quiz-question {
            font-size: 1.3rem;
            font-weight: 600;
            margin-bottom: 1.5rem;
            color: #2d3748;
            text-align: center;
        }

        .dark .quiz-question {
            color: #e2e8f0;
        }

        .quiz-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .quiz-option {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: var(--border-radius);
            padding: 1rem 1.5rem;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            font-weight: 500;
            position: relative;
            overflow: hidden;
        }

        .dark .quiz-option {
            background: #4a5568;
            border-color: #718096;
            color: #e2e8f0;
        }

        .quiz-option::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: var(--success-gradient);
            transition: all 0.3s ease;
            z-index: -1;
        }

        .quiz-option:hover::before,
        .quiz-option.selected::before {
            left: 0;
        }

        .quiz-option:hover,
        .quiz-option.selected {
            color: white;
            border-color: #4facfe;
            transform: translateY(-2px);
        }

        /* Vocabulary themes */
        .vocabulary-themes {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .theme-card {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            text-align: center;
            box-shadow: var(--shadow-soft);
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .dark .theme-card {
            background: #4a5568;
            color: #e2e8f0;
        }

        .theme-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-medium);
        }

        .theme-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
        }

        .word-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
            margin-top: 1rem;
            justify-content: center;
        }

        .word-tag {
            background: var(--primary-gradient);
            color: white;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            font-size: 0.9rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .word-tag:hover {
            transform: scale(1.05);
            box-shadow: var(--shadow-soft);
        }

        /* Memory game */
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            max-width: 400px;
            margin: 2rem auto;
        }

        .memory-card {
            aspect-ratio: 1;
            background: var(--primary-gradient);
            border-radius: var(--border-radius);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .memory-card:hover {
            transform: scale(1.05);
        }

        .memory-card.flipped {
            background: white;
            color: #2d3748;
            border: 2px solid #e2e8f0;
        }

        .dark .memory-card.flipped {
            background: #4a5568;
            color: #e2e8f0;
            border-color: #718096;
        }

        /* Chatbot */
        .chatbot-container {
            background: white;
            border-radius: var(--border-radius);
            box-shadow: var(--shadow-medium);
            overflow: hidden;
        }

        .dark .chatbot-container {
            background: #2d3748;
        }

        .chatbot-header {
            background: var(--secondary-gradient);
            color: white;
            padding: 1rem 1.5rem;
            font-weight: 600;
        }

        .chatbot-messages {
            height: 400px;
            overflow-y: auto;
            padding: 1rem;
            background: #f8faff;
        }

        .dark .chatbot-messages {
            background: #1a202c;
        }

        .chatbot-message {
            margin-bottom: 1rem;
            padding: 0.8rem 1.2rem;
            border-radius: var(--border-radius);
            max-width: 80%;
            position: relative;
            animation: slide-in 0.3s ease;
        }

        .chatbot-message.user {
            background: var(--primary-gradient);
            color: white;
            margin-left: auto;
        }

        .chatbot-message.bot {
            background: white;
            border: 1px solid #e2e8f0;
            margin-right: auto;
        }

        .dark .chatbot-message.bot {
            background: #4a5568;
            border-color: #718096;
            color: #e2e8f0;
        }

        .chatbot-input {
            display: flex;
            gap: 0.5rem;
            padding: 1rem;
            background: white;
        }

        .dark .chatbot-input {
            background: #2d3748;
        }

        .chatbot-input input {
            flex: 1;
            padding: 0.8rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 25px;
            font-size: 1rem;
        }

        .dark .chatbot-input input {
            background: #4a5568;
            border-color: #718096;
            color: #e2e8f0;
        }

        .chatbot-input button {
            background: var(--secondary-gradient);
            color: white;
            border: none;
            border-radius: 25px;
            padding: 0.8rem 1.5rem;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .chatbot-input button:hover {
            transform: translateY(-2px);
        }

        /* Progress indicators */
        .progress-container {
            background: white;
            border-radius: var(--border-radius);
            padding: 1.5rem;
            margin: 2rem 0;
            box-shadow: var(--shadow-soft);
        }

        .dark .progress-container {
            background: #4a5568;
            color: #e2e8f0;
        }

        .progress-bar {
            height: 20px;
            background: #e2e8f0;
            border-radius: 10px;
            overflow: hidden;
            margin: 1rem 0;
        }

        .dark .progress-bar {
            background: #718096;
        }

        .progress-fill {
            height: 100%;
            background: var(--success-gradient);
            border-radius: 10px;
            transition: width 0.5s ease;
        }

        /* Modal styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 2000;
            padding: 1rem;
        }

        .modal-content {
            background: white;
            border-radius: var(--border-radius);
            max-width: 600px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-strong);
        }

        .dark .modal-content {
            background: #2d3748;
            color: #e2e8f0;
        }

        /* Footer */
        footer {
            background: rgba(0, 0, 0, 0.8);
            color: white;
            text-align: center;
            padding: 3rem 2rem;
            margin-top: 4rem;
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .hero h1 {
                font-size: 2.5rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .card-grid {
                grid-template-columns: 1fr;
            }
            
            .quiz-options {
                grid-template-columns: 1fr;
            }
            
            .memory-grid {
                grid-template-columns: repeat(3, 1fr);
            }

            .nav-links {
                display: none;
            }
        }

        /* Utility classes */
        .hidden { display: none !important; }
        .fade-in { opacity: 0; animation: slide-in 0.6s ease forwards; }
        .text-center { text-align: center; }
        .mb-4 { margin-bottom: 1rem; }
        .mt-4 { margin-top: 1rem; }
        .p-4 { padding: 1rem; }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <nav class="flex justify-between items-center max-w-6xl mx-auto px-6 py-4">
            <div class="logo">SOUM<span style="color: white;">WEB</span></div>
            <ul class="nav-links flex space-x-6">
                <li><a href="#hero"><i class="fas fa-home mr-2"></i>Accueil</a></li>
                <li><a href="#conjugaison"><i class="fas fa-spell-check mr-2"></i>Conjugaison</a></li>
                <li><a href="#orthographe"><i class="fas fa-pen mr-2"></i>Orthographe</a></li>
                <li><a href="#grammaire"><i class="fas fa-book mr-2"></i>Grammaire</a></li>
                <li><a href="#vocabulaire"><i class="fas fa-language mr-2"></i>Vocabulaire</a></li>
                <li><a href="#ia-tools"><i class="fas fa-robot mr-2"></i>IA</a></li>
            </ul>
        </nav>
    </header>

    <!-- Hero Section -->
    <section id="hero" class="hero">
        <div class="hero-content animate-slide-in">
            <h1 class="animate-pulse-soft">üöÄ Apprendre le fran√ßais avec l'IA</h1>
            <p>D√©couvrez une nouvelle fa√ßon d'apprendre le fran√ßais gr√¢ce √† des outils intelligents, des jeux interactifs et des exercices adaptatifs qui s'ajustent √† votre niveau.</p>
            <a href="#conjugaison" class="btn btn-primary animate-float">
                <i class="fas fa-play mr-2"></i>Commencer l'aventure
            </a>
        </div>
    </section>

    <!-- Section Conjugaison -->
    <section id="conjugaison" class="section">
        <div class="section-container animate-slide-in">
            <div class="section-header">
                <h2 class="section-title">üìö Conjugaison Intelligente</h2>
                <p class="section-subtitle">Ma√Ætrisez la conjugaison fran√ßaise avec des exercices adaptatifs et des jeux interactifs</p>
            </div>

            <div class="card-grid">
                <!-- Quiz Adaptatif Avanc√© -->
                <div class="card">
                    <div class="card-icon conjugaison animate-pulse-soft">
                        <i class="fas fa-brain"></i>
                    </div>
                    <h3>üéØ Quiz Adaptatif Intelligent</h3>
                    <p>Un syst√®me d'IA qui analyse vos r√©ponses et adapte la difficult√© pour optimiser votre apprentissage.</p>
                    <button class="btn btn-success" onclick="startAdaptiveQuiz()">
                        <i class="fas fa-play mr-2"></i>Commencer le quiz
                    </button>

                    <div id="adaptive-quiz" class="quiz-container hidden">
                        <div id="quiz-progress" class="progress-container">
                            <div class="flex justify-between items-center mb-2">
                                <span>Progression</span>
                                <span id="quiz-score">0/0</span>
                            </div>
                            <div class="progress-bar">
                                <div id="progress-fill" class="progress-fill" style="width: 0%"></div>
                            </div>
                        </div>
                        
                        <div class="quiz-question" id="quiz-question">Question de conjugaison...</div>
                        <div class="quiz-options" id="quiz-options"></div>
                        <div class="text-center">
                            <button class="btn btn-primary" onclick="checkAnswer()">
                                <i class="fas fa-check mr-2"></i>V√©rifier
                            </button>
                            <button class="btn btn-info ml-4" onclick="nextQuestion()">
                                <i class="fas fa-forward mr-2"></i>Suivant
                            </button>
                        </div>
                        <div id="quiz-feedback" class="text-center mt-4 font-bold"></div>
                        
                        <div class="mt-6">
                            <h4 class="font-bold mb-2">üìä Statistiques de performance</h4>
                            <canvas id="performance-chart" width="400" height="200"></canvas>
                        </div>
                    </div>
                </div>

                <!-- Conjugaison par Temps -->
                <div class="card">
                    <div class="card-icon conjugaison animate-pulse-soft">
                        <i class="fas fa-clock"></i>
                    </div>
                    <h3>‚è∞ Ma√Ætrise des Temps</h3>
                    <p>Explorez tous les temps de conjugaison avec des exercices cibl√©s et des explications d√©taill√©es.</p>
                    <button class="btn btn-success" onclick="showTensesOverview()">
                        <i class="fas fa-list mr-2"></i>Explorer les temps
                    </button>

                    <div id="tenses-overview" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="practiceTense('present')">
                                <div class="theme-icon">üåÖ</div>
                                <h4>Pr√©sent</h4>
                                <p>Actions actuelles</p>
                            </div>
                            <div class="theme-card" onclick="practiceTense('pass√©-compos√©')">
                                <div class="theme-icon">üìÖ</div>
                                <h4>Pass√© Compos√©</h4>
                                <p>Actions pass√©es</p>
                            </div>
                            <div class="theme-card" onclick="practiceTense('imparfait')">
                                <div class="theme-icon">üï∞Ô∏è</div>
                                <h4>Imparfait</h4>
                                <p>Actions habituelles</p>
                            </div>
                            <div class="theme-card" onclick="practiceTense('futur')">
                                <div class="theme-icon">üîÆ</div>
                                <h4>Futur</h4>
                                <p>Actions futures</p>
                            </div>
                        </div>
                        <div id="tense-practice" class="quiz-container hidden">
                            <div id="tense-explanation" class="mb-4 p-4 bg-blue-50 rounded-lg"></div>
                            <div id="tense-exercises"></div>
                        </div>
                    </div>
                </div>

                <!-- Reconnaissance Vocale Avanc√©e -->
                <div class="card">
                    <div class="card-icon conjugaison animate-pulse-soft">
                        <i class="fas fa-microphone"></i>
                    </div>
                    <h3>üé§ Prononciation Interactive</h3>
                    <p>Perfectionnez votre prononciation avec notre IA de reconnaissance vocale avanc√©e.</p>
                    <button class="btn btn-success" onclick="startVoiceTraining()">
                        <i class="fas fa-microphone mr-2"></i>Commencer l'entra√Ænement
                    </button>

                    <div id="voice-training" class="hidden">
                        <div class="text-center p-6">
                            <div id="word-to-pronounce" class="text-2xl font-bold mb-4">je mange</div>
                            <button id="voice-btn" class="btn btn-danger mb-4" onclick="startListening()">
                                <i class="fas fa-microphone mr-2"></i>Enregistrer
                            </button>
                            <button class="btn btn-info ml-2" onclick="generateRandomWordToPronounce()">
                                <i class="fas fa-random mr-2"></i>Nouveau mot
                            </button>
                            <div id="voice-feedback" class="mt-4"></div>
                            <div id="pronunciation-tips" class="mt-4 p-4 bg-yellow-50 rounded-lg hidden">
                                <h5 class="font-bold">üí° Conseils de prononciation :</h5>
                                <p id="tip-content"></p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Orthographe -->
    <section id="orthographe" class="section">
        <div class="section-container animate-slide-in">
            <div class="section-header">
                <h2 class="section-title">‚úçÔ∏è Orthographe Ludique</h2>
                <p class="section-subtitle">Am√©liorez votre orthographe avec des jeux innovants et des exercices personnalis√©s</p>
            </div>

            <div class="card-grid">
                <!-- Dict√©e Interactive -->
                <div class="card">
                    <div class="card-icon orthographe animate-pulse-soft">
                        <i class="fas fa-headphones"></i>
                    </div>
                    <h3>üìù Dict√©e Interactive</h3>
                    <p>√âcoutez et √©crivez des textes de difficult√© progressive avec correction instantan√©e.</p>
                    <button class="btn btn-warning" onclick="startDictation()">
                        <i class="fas fa-play mr-2"></i>Commencer la dict√©e
                    </button>

                    <div id="dictation-exercise" class="hidden">
                        <div class="text-center mb-4">
                            <button id="play-audio" class="btn btn-info">
                                <i class="fas fa-volume-up mr-2"></i>√âcouter
                            </button>
                            <button class="btn btn-secondary ml-2" onclick="playSlowly()">
                                <i class="fas fa-turtle mr-2"></i>Lent
                            </button>
                            <button class="btn btn-primary ml-2" onclick="startDictation()">
                                <i class="fas fa-refresh mr-2"></i>Nouvelle phrase
                            </button>
                        </div>
                        <textarea id="dictation-text" class="w-full p-4 border rounded-lg text-base" rows="5" placeholder="√âcrivez ce que vous entendez..."></textarea>
                        <div class="text-center mt-4">
                            <button class="btn btn-primary" onclick="checkDictation()">
                                <i class="fas fa-check mr-2"></i>V√©rifier
                            </button>
                        </div>
                        <div id="dictation-feedback" class="mt-4"></div>
                    </div>
                </div>

                <!-- Mots Fr√©quents -->
                <div class="card">
                    <div class="card-icon orthographe animate-pulse-soft">
                        <i class="fas fa-list"></i>
                    </div>
                    <h3>üìä Mots Fr√©quents</h3>
                    <p>Ma√Ætrisez l'orthographe des 1000 mots les plus utilis√©s en fran√ßais avec des jeux vari√©s.</p>
                    <button class="btn btn-warning" onclick="showFrequentWords()">
                        <i class="fas fa-chart-bar mr-2"></i>Explorer les mots
                    </button>

                    <div id="frequent-words" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="practiceWordCategory('100-most-common')">
                                <div class="theme-icon">‚≠ê</div>
                                <h4>Top 100</h4>
                                <p>Les plus essentiels</p>
                            </div>
                            <div class="theme-card" onclick="practiceWordCategory('verbs')">
                                <div class="theme-icon">üèÉ</div>
                                <h4>Verbes</h4>
                                <p>Actions importantes</p>
                            </div>
                            <div class="theme-card" onclick="practiceWordCategory('adjectives')">
                                <div class="theme-icon">üé®</div>
                                <h4>Adjectifs</h4>
                                <p>Descriptions utiles</p>
                            </div>
                            <div class="theme-card" onclick="practiceWordCategory('difficult')">
                                <div class="theme-icon">üß©</div>
                                <h4>Difficiles</h4>
                                <p>D√©fi orthographique</p>
                            </div>
                        </div>
                        <div id="word-practice" class="quiz-container hidden">
                            <div id="word-challenge" class="text-center">
                                <div id="word-definition" class="text-lg mb-4"></div>
                                <input type="text" id="word-input" class="text-center text-xl p-4 border rounded-lg text-base" placeholder="√âcrivez le mot...">
                                <button class="btn btn-primary ml-4" onclick="checkWord()">V√©rifier</button>
                            </div>
                            <div id="word-feedback" class="mt-4 text-center"></div>
                        </div>
                    </div>
                </div>

                <!-- R√®gles d'Orthographe -->
                <div class="card">
                    <div class="card-icon orthographe animate-pulse-soft">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>üìö R√®gles d'Orthographe</h3>
                    <p>Apprenez les r√®gles importantes avec des exemples et des exercices pratiques.</p>
                    <button class="btn btn-warning" onclick="showOrthographyRules()">
                        <i class="fas fa-book-open mr-2"></i>D√©couvrir les r√®gles
                    </button>

                    <div id="orthography-rules" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="learnRule('accents')">
                                <div class="theme-icon">√©</div>
                                <h4>Accents</h4>
                                <p>√©, √®, √™, √´</p>
                            </div>
                            <div class="theme-card" onclick="learnRule('homophones')">
                                <div class="theme-icon">üë•</div>
                                <h4>Homophones</h4>
                                <p>√†/a, et/est, son/sont</p>
                            </div>
                            <div class="theme-card" onclick="learnRule('plurals')">
                                <div class="theme-icon">üìö</div>
                                <h4>Pluriels</h4>
                                <p>-s, -x, exceptions</p>
                            </div>
                            <div class="theme-card" onclick="learnRule('agreements')">
                                <div class="theme-icon">ü§ù</div>
                                <h4>Accords</h4>
                                <p>Participe pass√©</p>
                            </div>
                        </div>
                        <div id="rule-explanation" class="hidden">
                            <div id="rule-content" class="p-4 bg-blue-50 rounded-lg mb-4"></div>
                            <div id="rule-exercises" class="quiz-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Grammaire -->
    <section id="grammaire" class="section">
        <div class="section-container animate-slide-in">
            <div class="section-header">
                <h2 class="section-title">üìñ Grammaire Interactive</h2>
                <p class="section-subtitle">Ma√Ætrisez les r√®gles grammaticales avec des exercices visuels et interactifs</p>
            </div>

            <div class="card-grid">
                <!-- Analyse Grammaticale -->
                <div class="card">
                    <div class="card-icon grammaire animate-pulse-soft">
                        <i class="fas fa-search"></i>
                    </div>
                    <h3>üîç Analyse Grammaticale</h3>
                    <p>Identifiez la nature et la fonction des mots dans des phrases avec un syst√®me d'aide visuelle.</p>
                    <button class="btn btn-info" onclick="startGrammarAnalysis()">
                        <i class="fas fa-magnifying-glass mr-2"></i>Commencer l'analyse
                    </button>

                    <div id="grammar-analysis" class="hidden">
                        <div class="quiz-container">
                            <div id="sentence-to-analyze" class="text-xl mb-6 text-center font-bold"></div>
                            <div id="word-highlighting" class="mb-4 text-lg leading-relaxed"></div>
                            <div class="text-center">
                                <div class="inline-flex flex-wrap gap-2 mb-4">
                                    <span class="px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm">Nom</span>
                                    <span class="px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm">Verbe</span>
                                    <span class="px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm">Adjectif</span>
                                    <span class="px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm">Adverbe</span>
                                    <span class="px-3 py-1 bg-red-100 text-red-800 rounded-full text-sm">D√©terminant</span>
                                </div>
                            </div>
                            <div id="analysis-feedback" class="text-center"></div>
                            <div class="text-center mt-4">
                                <button class="btn btn-primary" onclick="generateNewSentence()">Nouvelle phrase</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Construction de Phrases -->
                <div class="card">
                    <div class="card-icon grammaire animate-pulse-soft">
                        <i class="fas fa-puzzle-piece"></i>
                    </div>
                    <h3>üß© Construction de Phrases</h3>
                    <p>Apprenez √† construire des phrases correctes en assemblant les √©l√©ments grammaticaux.</p>
                    <button class="btn btn-info" onclick="startSentenceBuilder()">
                        <i class="fas fa-hammer mr-2"></i>Construire des phrases
                    </button>

                    <div id="sentence-builder" class="hidden">
                        <div class="quiz-container">
                            <div id="sentence-target" class="text-lg mb-4 text-center font-bold"></div>
                            <div id="word-bank" class="mb-6">
                                <h4 class="font-bold mb-2">Banque de mots :</h4>
                                <div id="available-words" class="flex flex-wrap gap-2"></div>
                            </div>
                            <div id="sentence-construction" class="mb-4">
                                <h4 class="font-bold mb-2">Votre phrase :</h4>
                                <div id="constructed-sentence" class="min-h-12 p-4 border-2 border-dashed border-gray-300 rounded-lg flex flex-wrap gap-2 items-center"></div>
                            </div>
                            <div class="text-center">
                                <button class="btn btn-primary" onclick="checkSentence()">V√©rifier</button>
                                <button class="btn btn-secondary ml-2" onclick="clearSentence()">Effacer</button>
                                <button class="btn btn-info ml-2" onclick="generateSentenceChallenge()">Nouveau d√©fi</button>
                            </div>
                            <div id="sentence-feedback" class="mt-4 text-center"></div>
                        </div>
                    </div>
                </div>

                <!-- Temps et Modes -->
                <div class="card">
                    <div class="card-icon grammaire animate-pulse-soft">
                        <i class="fas fa-cogs"></i>
                    </div>
                    <h3>‚öôÔ∏è Temps et Modes</h3>
                    <p>Explorez les diff√©rents temps et modes avec des exemples et des exercices pratiques.</p>
                    <button class="btn btn-info" onclick="exploreTensesAndModes()">
                        <i class="fas fa-compass mr-2"></i>Explorer
                    </button>

                    <div id="tenses-modes" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="exploreMode('indicatif')">
                                <div class="theme-icon">üìä</div>
                                <h4>Indicatif</h4>
                                <p>R√©alit√©, certitude</p>
                            </div>
                            <div class="theme-card" onclick="exploreMode('subjonctif')">
                                <div class="theme-icon">üí≠</div>
                                <h4>Subjonctif</h4>
                                <p>Doute, √©motion</p>
                            </div>
                            <div class="theme-card" onclick="exploreMode('conditionnel')">
                                <div class="theme-icon">‚ùì</div>
                                <h4>Conditionnel</h4>
                                <p>Hypoth√®se, politesse</p>
                            </div>
                            <div class="theme-card" onclick="exploreMode('imperatif')">
                                <div class="theme-icon">‚ùó</div>
                                <h4>Imp√©ratif</h4>
                                <p>Ordre, conseil</p>
                            </div>
                        </div>
                        <div id="mode-explanation" class="hidden">
                            <div id="mode-content" class="p-4 bg-blue-50 rounded-lg mb-4"></div>
                            <div id="mode-exercises" class="quiz-container"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Vocabulaire -->
    <section id="vocabulaire" class="section">
        <div class="section-container animate-slide-in">
            <div class="section-header">
                <h2 class="section-title">üó£ Vocabulaire Enrichi</h2>
                <p class="section-subtitle">Enrichissez votre vocabulaire avec des th√®mes vari√©s et des m√©thodes d'apprentissage innovantes</p>
            </div>

            <div class="card-grid">
                <!-- Th√®mes Extensifs -->
                <div class="card">
                    <div class="card-icon vocabulaire animate-pulse-soft">
                        <i class="fas fa-globe"></i>
                    </div>
                    <h3>üåç Th√®mes du Quotidien</h3>
                    <p>D√©couvrez plus de 20 th√®mes avec 2000+ mots pour enrichir votre vocabulaire quotidien.</p>
                    <button class="btn btn-danger" onclick="exploreVocabularyThemes()">
                        <i class="fas fa-search mr-2"></i>Explorer les th√®mes
                    </button>

                    <div id="vocabulary-themes-extended" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="loadTheme('famille')">
                                <div class="theme-icon">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</div>
                                <h4>Famille</h4>
                                <p>75 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('maison')">
                                <div class="theme-icon">üè†</div>
                                <h4>Maison</h4>
                                <p>120 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('nourriture')">
                                <div class="theme-icon">üçΩÔ∏è</div>
                                <h4>Nourriture</h4>
                                <p>150 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('transport')">
                                <div class="theme-icon">üöó</div>
                                <h4>Transport</h4>
                                <p>50 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('metiers')">
                                <div class="theme-icon">üíº</div>
                                <h4>M√©tiers</h4>
                                <p>75 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('emotions')">
                                <div class="theme-icon">üòä</div>
                                <h4>√âmotions</h4>
                                <p>50 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('nature')">
                                <div class="theme-icon">üå≥</div>
                                <h4>Nature</h4>
                                <p>100 mots</p>
                            </div>
                            <div class="theme-card" onclick="loadTheme('sports')">
                                <div class="theme-icon">‚öΩ</div>
                                <h4>Sports</h4>
                                <p>90 mots</p>
                            </div>
                        </div>
                        <div id="theme-content" class="quiz-container hidden">
                            <div id="theme-header" class="text-center mb-4"></div>
                            <div id="theme-words" class="word-list mb-4"></div>
                            <div class="text-center">
                                <button class="btn btn-primary" onclick="startThemeQuiz()">Quiz sur ce th√®me</button>
                                <button class="btn btn-info ml-2" onclick="playMemoryGame()">Jeu de m√©moire</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Apprentissage Sp√©cialis√© -->
                <div class="card">
                    <div class="card-icon vocabulaire animate-pulse-soft">
                        <i class="fas fa-graduation-cap"></i>
                    </div>
                    <h3>üéì Apprentissage Sp√©cialis√©</h3>
                    <p>M√©thodes d'apprentissage bas√©es sur la science cognitive pour une m√©morisation efficace.</p>
                    <button class="btn btn-danger" onclick="startSpecializedLearning()">
                        <i class="fas fa-brain mr-2"></i>M√©thodes sp√©cialis√©es
                    </button>

                    <div id="specialized-learning" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="startSpacedRepetition()">
                                <div class="theme-icon">üîÑ</div>
                                <h4>R√©p√©tition Espac√©e</h4>
                                <p>M√©morisation optimis√©e</p>
                            </div>
                            <div class="theme-card" onclick="startAssociationGame()">
                                <div class="theme-icon">üîó</div>
                                <h4>Associations</h4>
                                <p>Liens mn√©motechniques</p>
                            </div>
                            <div class="theme-card" onclick="startContextualLearning()">
                                <div class="theme-icon">üìñ</div>
                                <h4>Apprentissage Contextuel</h4>
                                <p>Mots en situation</p>
                            </div>
                            <div class="theme-card" onclick="startVisualLearning()">
                                <div class="theme-icon">üëÅÔ∏è</div>
                                <h4>Apprentissage Visuel</h4>
                                <p>M√©moire visuelle</p>
                            </div>
                        </div>
                        <div id="learning-method-content" class="quiz-container hidden"></div>
                    </div>
                </div>

                <!-- Jeux Avanc√©s -->
                <div class="card">
                    <div class="card-icon vocabulaire animate-pulse-soft">
                        <i class="fas fa-gamepad"></i>
                    </div>
                    <h3>üéÆ Jeux Avanc√©s</h3>
                    <p>Collection de jeux interactifs pour apprendre en s'amusant avec des d√©fis progressifs.</p>
                    <button class="btn btn-danger" onclick="showAdvancedGames()">
                        <i class="fas fa-play mr-2"></i>Jouer maintenant
                    </button>

                    <div id="advanced-games" class="hidden">
                        <div class="vocabulary-themes">
                            <div class="theme-card" onclick="playWordChain()">
                                <div class="theme-icon">üîó</div>
                                <h4>Cha√Æne de Mots</h4>
                                <p>Cr√©ez des liens</p>
                            </div>
                            <div class="theme-card" onclick="playAnagramGame()">
                                <div class="theme-icon">üî§</div>
                                <h4>Anagrammes</h4>
                                <p>M√©langez les lettres</p>
                            </div>
                            <div class="theme-card" onclick="playDefinitionGuess()">
                                <div class="theme-icon">üéØ</div>
                                <h4>Devine la D√©finition</h4>
                                <p>Trouvez le sens</p>
                            </div>
                            <div class="theme-card" onclick="playAdvancedMemory()">
                                <div class="theme-icon">üß†</div>
                                <h4>Memory Avanc√©</h4>
                                <p>D√©fi de m√©moire</p>
                            </div>
                        </div>
                        <div id="game-content" class="quiz-container hidden"></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Section Outils IA -->
    <section id="ia-tools" class="section">
        <div class="section-container animate-slide-in">
            <div class="section-header">
                <h2 class="section-title">ü§ñ Outils IA Avanc√©s</h2>
                <p class="section-subtitle">D√©couvrez le futur de l'apprentissage avec nos outils d'intelligence artificielle</p>
            </div>

            <div class="card-grid">
                <!-- Assistant IA Conversationnel -->
                <div class="card">
                    <div class="card-icon ia animate-pulse-soft">
                        <i class="fas fa-comments"></i>
                    </div>
                    <h3>üí¨ Assistant IA Conversationnel</h3>
                    <p>Conversez avec notre IA sp√©cialis√©e en fran√ßais pour des r√©ponses personnalis√©es et interactives.</p>
                    <button class="btn btn-secondary" onclick="startAIConversation()">
                        <i class="fas fa-robot mr-2"></i>Parler avec l'IA
                    </button>

                    <div id="ai-conversation" class="chatbot-container hidden">
                        <div class="chatbot-header">
                            <div class="flex items-center">
                                <i class="fas fa-robot mr-2"></i>
                                Assistant Fran√ßais IA
                                <div class="ml-auto">
                                    <span class="inline-block w-2 h-2 bg-green-400 rounded-full animate-pulse"></span>
                                    <span class="text-sm ml-1">En ligne</span>
                                </div>
                            </div>
                        </div>
                        <div class="chatbot-messages" id="ai-messages">
                            <div class="chatbot-message bot">
                                Bonjour ! Je suis votre assistant IA sp√©cialis√© en fran√ßais. 
                                Posez-moi des questions sur la grammaire, l'orthographe, la conjugaison ou le vocabulaire. 
                                Je peux aussi vous aider avec des exercices personnalis√©s ! üòä
                            </div>
                        </div>
                        <div class="chatbot-input">
                            <input type="text" id="ai-input" class="text-base" placeholder="Posez votre question..." onkeypress="handleEnterPress(event)">
                            <button onclick="sendAIMessage()">
                                <i class="fas fa-paper-plane"></i>
                            </button>
                        </div>
                    </div>
                </div>

                <!-- G√©n√©rateur de Contenu -->
                <div class="card">
                    <div class="card-icon ia animate-pulse-soft">
                        <i class="fas fa-magic"></i>
                    </div>
                    <h3>‚ú® G√©n√©rateur de Contenu</h3>
                    <p>G√©n√©rez automatiquement des exercices, des histoires et des d√©fis adapt√©s √† votre niveau.</p>
                    <button class="btn btn-secondary" onclick="showContentGenerator()">
                        <i class="fas fa-wand-magic-sparkles mr-2"></i>G√©n√©rer du contenu
                    </button>

                    <div id="content-generator" class="hidden">
                        <div class="quiz-container">
                            <h4 class="font-bold mb-4">Choisissez le type de contenu :</h4>
                            <div class="vocabulary-themes">
                                <div class="theme-card" onclick="generateContent('story')">
                                    <div class="theme-icon">üìö</div>
                                    <h4>Histoire</h4>
                                    <p>R√©cit personnalis√©</p>
                                </div>
                                <div class="theme-card" onclick="generateContent('exercises')">
                                    <div class="theme-icon">üìù</div>
                                    <h4>Exercices</h4>
                                    <p>D√©fis sur mesure</p>
                                </div>
                                <div class="theme-card" onclick="generateContent('poem')">
                                    <div class="theme-icon">üé≠</div>
                                    <h4>Po√®me</h4>
                                    <p>Cr√©ation po√©tique</p>
                                </div>
                                <div class="theme-card" onclick="generateContent('dialogue')">
                                    <div class="theme-icon">üí¨</div>
                                    <h4>Dialogue</h4>
                                    <p>Conversation r√©aliste</p>
                                </div>
                            </div>
                            <div id="content-options" class="hidden">
                                <h5 class="font-bold mb-2">Personnalisez votre contenu :</h5>
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Niveau :</label>
                                        <select id="content-level" class="w-full p-2 border rounded text-base">
                                            <option value="debutant">D√©butant</option>
                                            <option value="intermediaire">Interm√©diaire</option>
                                            <option value="avance">Avanc√©</option>
                                        </select>
                                    </div>
                                    <div>
                                        <label class="block text-sm font-medium mb-1">Th√®me :</label>
                                        <select id="content-theme" class="w-full p-2 border rounded text-base">
                                            <option value="aventure">Aventure</option>
                                            <option value="quotidien">Vie quotidienne</option>
                                            <option value="fantastique">Fantastique</option>
                                            <option value="science">Science</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary" onclick="createContent()">
                                    <i class="fas fa-sparkles mr-2"></i>Cr√©er
                                </button>
                            </div>
                            <div id="generated-content" class="hidden">
                                <h5 class="font-bold mb-2">Contenu g√©n√©r√© :</h5>
                                <div id="content-result" class="p-4 bg-gray-50 rounded-lg mb-4 text-base"></div>
                                <button class="btn btn-info" onclick="analyzeContent()">
                                    <i class="fas fa-search mr-2"></i>Analyser le contenu
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analyse de Texte IA -->
                <div class="card">
                    <div class="card-icon ia animate-pulse-soft">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <h3>üìä Analyse de Texte IA</h3>
                    <p>Analysez vos textes avec notre IA pour obtenir des conseils d'am√©lioration personnalis√©s.</p>
                    <button class="btn btn-secondary" onclick="showTextAnalyzer()">
                        <i class="fas fa-microscope mr-2"></i>Analyser un texte
                    </button>

                    <div id="text-analyzer" class="hidden">
                        <div class="quiz-container">
                            <h4 class="font-bold mb-4">Collez votre texte pour analyse :</h4>
                            <textarea id="text-to-analyze" class="w-full p-4 border rounded-lg mb-4 text-base" rows="6" placeholder="Collez votre texte ici..."></textarea>
                            <button class="btn btn-primary" onclick="analyzeText()">
                                <i class="fas fa-search mr-2"></i>Analyser
                            </button>
                            
                            <div id="analysis-results" class="hidden">
                                <h5 class="font-bold mt-6 mb-4">R√©sultats de l'analyse :</h5>
                                <div class="grid grid-cols-2 gap-4 mb-4">
                                    <div class="p-4 bg-blue-50 rounded-lg">
                                        <h6 class="font-bold">Statistiques</h6>
                                        <div id="text-stats"></div>
                                    </div>
                                    <div class="p-4 bg-green-50 rounded-lg">
                                        <h6 class="font-bold">Niveau de difficult√©</h6>
                                        <div id="difficulty-level"></div>
                                    </div>
                                </div>
                                <div class="p-4 bg-yellow-50 rounded-lg mb-4">
                                    <h6 class="font-bold">Suggestions d'am√©lioration</h6>
                                    <div id="improvement-suggestions"></div>
                                </div>
                                <div class="p-4 bg-purple-50 rounded-lg">
                                    <h6 class="font-bold">Erreurs d√©tect√©es</h6>
                                    <div id="detected-errors"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="max-w-6xl mx-auto">
            <h3 class="text-2xl font-bold mb-4">üöÄ SOUMWEB - Votre partenaire d'apprentissage</h3>
            <p class="mb-4">R√©volutionnez votre apprentissage du fran√ßais avec nos outils d'IA de pointe</p>
            <div class="flex justify-center space-x-6 mb-4">
                <a href="mailto:francais@soumweb.com" class="text-blue-300 hover:text-white">
                    <i class="fas fa-envelope mr-2"></i>francais@soumweb.com
                </a>
                <a href="tel:+33123456789" class="text-blue-300 hover:text-white">
                    <i class="fas fa-phone mr-2"></i>+33 1 23 45 67 89
                </a>
            </div>
            <p class="text-sm opacity-75">&copy; 2025 SOUMWEB. Tous droits r√©serv√©s. | 
                <a href="#" class="text-blue-300 hover:text-white">Mentions l√©gales</a> | 
                <a href="#" class="text-blue-300 hover:text-white">Politique de confidentialit√©</a>
            </p>
        </div>
    </footer>

    <script>
        // Data structures with extended vocabulary
        const vocabularyData = {
            famille: {
                icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶',
                words: ['p√®re', 'm√®re', 'fils', 'fille', 'fr√®re', 's≈ìur', 'grand-p√®re', 'grand-m√®re', 'oncle', 'tante', 'cousin', 'cousine', 'neveu', 'ni√®ce', 'beau-p√®re', 'belle-m√®re', 'gendre', 'bru', 'parrain', 'marraine', 'filleul', 'filleule', '√©poux', '√©pouse', 'mari', 'femme', 'enfant', 'b√©b√©', 'adolescent', 'adulte', 'anc√™tre', 'descendant', 'jumeau', 'jumeaux', 'famille', 'foyer', 'maison', 'domicile', 'lign√©e', 'g√©n√©ration', 'parent√©', 'alliance', 'h√©ritage', 'tradition', 'adoption', 'tuteur', 'pupille', 'orphelin', 'veuf', 'veuve', 'c√©libataire', 'divorc√©', 'remari√©', 'beaux-parents', 'belle-s≈ìur', 'beau-fr√®re', 'petits-enfants', 'arri√®re-grand-p√®re', 'arri√®re-grand-m√®re', 'bisa√Øeul', 'trisa√Øeul', 'descendance', 'ascendance', 'fratrie', 'a√Æn√©', 'cadet', 'benjamin', 'nouveau-n√©', 'nourrisson', 'bambin', 'gamin', 'adolescence', 'maturit√©', 'vieillesse']
            },
            maison: {
                icon: 'üè†',
                words: ['salon', 'cuisine', 'chambre', 'salle de bain', 'garage', 'jardin', 'balcon', 'terrasse', 'cave', 'grenier', 'couloir', 'escalier', 'porte', 'fen√™tre', 'mur', 'plafond', 'sol', 'toit', 'chemin√©e', 'radiateur', 'climatisation', '√©lectricit√©', 'plomberie', 'chauffage', 'isolation', 'd√©coration', 'mobilier', 'canap√©', 'fauteuil', 'table', 'chaise', 'lit', 'armoire', 'commode', '√©tag√®re', 'bureau', 'biblioth√®que', 't√©l√©vision', 'ordinateur', 'r√©frig√©rateur', 'four', 'micro-onde', 'lave-vaisselle', 'lave-linge', 'aspirateur', 'fer √† repasser', 'r√©veil', 'lampe', 'rideau', 'tapis', 'coussin', 'couverture', 'oreiller', 'drap', 'serviette', 'miroir', 'tableau', 'plante', 'vase', 'horloge', 'vestibule', 'entr√©e', 'hall', 'antichambre', 'dressing', 'placard', 'penderie', 'buanderie', 'cellier', 'garde-manger', 'office', 'v√©randa', 'bow-window', 'mansarde', 'sous-sol', 'combles', 'mezzanine', 'palier', 'perron', 'seuil', 'linteau', 'chambranle', 'serrure', 'poign√©e', 'verrou', 'paillasson', 'store', 'volet', 'persienne', 'goutti√®re', 'lucarne', 'charpente', 'poutre', 'solive', 'cloison', 'papier peint', 'carrelage', 'parquet', 'moquette', 'linol√©um', 'plinthe', 'corniche', 'moulure', 'interrupteur', 'prise', 'disjoncteur', 'compteur', 'robinet', '√©vier', 'lavabo', 'douche', 'baignoire', 'WC', 'bidet', 's√®che-cheveux', 'brosse √† dents', 'savon', 'shampoing', 'dentifrice', 'rasoir', 'parfum', 'd√©odorant', 'cr√®me', 'lotion']
            },
            nourriture: {
                icon: 'üçΩÔ∏è',
                words: ['pain', 'fromage', 'lait', '≈ìuf', 'beurre', 'yaourt', 'viande', 'poisson', 'poulet', 'b≈ìuf', 'porc', 'agneau', 'jambon', 'saucisson', 'p√¢te', 'riz', 'pomme de terre', 'l√©gume', 'fruit', 'salade', 'tomate', 'carotte', 'oignon', 'ail', 'persil', 'basilic', 'thym', 'romarin', 'sel', 'poivre', 'sucre', 'miel', 'confiture', 'chocolat', 'g√¢teau', 'biscuit', 'bonbon', 'glace', 'eau', 'jus', 'caf√©', 'th√©', 'vin', 'bi√®re', 'soda', 'restaurant', 'menu', 'entr√©e', 'plat', 'dessert', 'addition', 'pourboire', 'serveur', 'chef', 'cuisine', 'recette', 'ingr√©dient', 'cuisson', 'assaisonnement', 'd√©jeuner', 'd√Æner', 'petit-d√©jeuner', 'go√ªter', 'repas', 'faim', 'soif', 'app√©tit', 'saveur', 'go√ªt', 'd√©licieux', 'excellent', 'bon', 'mauvais', '√©pic√©', 'sucr√©', 'sal√©', 'amer', 'acide', 'frais', 'chaud', 'froid', 'cru', 'cuit', 'baguette', 'croissant', 'brioche', 'viennoiserie', 'p√¢tisserie', 'tarte', 'flan', '√©clair', 'chou', 'macaron', 'madeleine', 'financier', 'sabl√©', 'pain de mie', 'biscottes', 'c√©r√©ales', 'm√ºesli', 'granola', 'flocons d\'avoine', 'cornflakes', 'cr√®me fra√Æche', 'lait concentr√©', 'lait en poudre', 'fromage blanc', 'ricotta', 'mascarpone', 'roquefort', 'camembert', 'brie', 'ch√®vre', 'gruy√®re', 'emmental', 'comt√©', 'parmesan', 'mozzarella', 'feta', 'cottage', 'cheddar', 'saumon', 'thon', 'sardine', 'maquereau', 'sole', 'cabillaud', 'colin', 'daurade', 'bar', 'truite', 'crevette', 'homard', 'crabe', 'moule', 'hu√Ætre', 'coquille Saint-Jacques', 'calmar', 'seiche', 'poulpe', 'veau', 'lapin', 'canard', 'oie', 'dinde', 'pintade', 'caille', 'faisan', 'sanglier', 'cerf', 'chevreuil', 'bacon', 'lardons', 'chorizo', 'merguez', 'chipolata', 'boudin', 'p√¢t√©', 'rillettes', 'foie gras', 'caviar', 'tarama']
            },
            transport: {
                icon: 'üöó',
                words: ['voiture', 'bus', 'train', 'm√©tro', 'tramway', 'avion', 'bateau', 'v√©lo', 'moto', 'scooter', 'taxi', 'camion', 'autocar', 'ambulance', 'pompiers', 'police', 'route', 'rue', 'avenue', 'boulevard', 'autoroute', 'pont', 'tunnel', 'carrefour', 'rond-point', 'feu', 'panneau', 'parking', 'garage', 'station-service', 'gare', 'a√©roport', 'port', 'arr√™t', 'ticket', 'billet', 'abonnement', 'voyage', 'destination', 'd√©part', 'arriv√©e', 'horaire', 'retard', 'avance', 'conducteur', 'passager', 'pilote', 'capitaine', 'm√©canicien', 'p√©age', 'essence', 'diesel', '√©lectrique', 'hybride']
            },
            metiers: {
                icon: 'üíº',
                words: ['m√©decin', 'infirmier', 'professeur', 'avocat', 'ing√©nieur', 'architecte', 'comptable', 'vendeur', 'cuisinier', 'boulanger', 'm√©canicien', '√©lectricien', 'plombier', 'jardinier', 'coiffeur', 'dentiste', 'v√©t√©rinaire', 'pharmacien', 'pompier', 'policier', 'militaire', 'juge', 'notaire', 'banquier', 'assureur', 'journaliste', '√©crivain', 'artiste', 'musicien', 'acteur', 'danseur', 'chanteur', 'photographe', 'cameraman', 'r√©alisateur', 'producteur', '√©diteur', 'traducteur', 'interpr√®te', 'guide', 'agent', 'directeur', 'manager', 'secr√©taire', 'assistant', 'technicien', 'ouvrier', 'artisan', 'commer√ßant', 'entrepreneur', 'patron', 'employ√©', 'stagiaire', 'apprenti', '√©tudiant', 'chercheur', 'scientifique', 'chimiste', 'biologiste', 'physicien', 'math√©maticien', 'informaticien', 'programmeur', 'designer', 'graphiste', 'webmaster', 'consultant', 'formateur', 'coach', 'th√©rapeute', 'psychologue', 'psychiatre', 'kin√©sith√©rapeute', 'orthophoniste', 'sage-femme', 'ambulancier']
            },
            emotions: {
                icon: 'üòä',
                words: ['joie', 'bonheur', 'tristesse', 'col√®re', 'peur', 'surprise', 'd√©go√ªt', 'amour', 'haine', 'jalousie', 'envie', 'fiert√©', 'honte', 'culpabilit√©', 'regret', 'nostalgie', 'm√©lancolie', 'euphorie', 'extase', 's√©r√©nit√©', 'paix', 'calme', 'stress', 'anxi√©t√©', 'angoisse', 'panic', 'terreur', 'effroi', 'crainte', 'inqui√©tude', 'soulagement', 'espoir', 'd√©sespoir', 'optimisme', 'pessimisme', 'confiance', 'm√©fiance', 'doute', 'certitude', 'confusion', 'clart√©', 'fascination', 'ennui', 'excitation', 'enthousiasme', 'passion', 'indiff√©rence', 'admiration', 'm√©pris']
            },
            nature: {
                icon: 'üå≥',
                words: ['arbre', 'for√™t', 'fleur', 'herbe', 'feuille', 'branche', 'racine', 'tronc', '√©corce', 's√®ve', 'fruit', 'graine', 'pollen', 'nectar', 'ros√©e', 'pluie', 'neige', 'gr√™le', 'brouillard', 'nuage', 'soleil', 'lune', '√©toile', 'ciel', 'horizon', 'montagne', 'colline', 'vall√©e', 'plaine', 'plateau', 'rivi√®re', 'fleuve', 'lac', '√©tang', 'mer', 'oc√©an', 'vague', 'mar√©e', 'courant', 'source', 'cascade', 'chute', 'grotte', 'caverne', 'rocher', 'pierre', 'sable', 'terre', 'sol', 'humus', 'vent', 'brise', 'temp√™te', 'orage', 'tonnerre', '√©clair', 'foudre', 'arc-en-ciel', 'saison', 'printemps', '√©t√©', 'automne', 'hiver', 'chaleur', 'froid', 'temp√©rature', 'climat', 'm√©t√©o', 'animal', 'oiseau', 'poisson', 'insecte', 'mammif√®re', 'reptile', 'amphibien', '√©cosyst√®me', 'biodiversit√©', 'environnement', 'nature', 'naturel', 'sauvage', 'domestique', 'protection', 'conservation', 'pollution', '√©cologie', 'durable', 'renouvelable', 'recyclage', 'compost', 'bio', 'organique', 'ch√™ne', 'pin', 'sapin', 'bouleau', '√©rable', 'tilleul', 'platane', 'peuplier', 'saule', 'noisetier', 'ch√¢taignier', 'marronnier', 'olivier', 'cypr√®s', 'c√®dre', 'sequoia', 'baobab', 'palmier']
            },
            sports: {
                icon: '‚öΩ',
                words: ['football', 'tennis', 'basketball', 'volleyball', 'handball', 'rugby', 'natation', 'course', 'cyclisme', 'ski', 'snowboard', 'patinage', 'hockey', 'golf', 'baseball', 'badminton', 'ping-pong', 'squash', 'boxe', 'judo', 'karat√©', 'taekwondo', 'escrime', 'tir', 'archery', '√©quitation', 'voile', 'surf', 'plong√©e', 'escalade', 'alpinisme', 'randonn√©e', 'jogging', 'marathon', 'sprint', 'saut', 'lancer', 'gymnastique', 'athl√©tisme', 'musculation', 'fitness', 'yoga', 'pilates', 'danse', 'ballon', 'raquette', 'batte', 'club', 'stade', 'terrain', 'piscine', 'piste', 'court', 'ring', '√©quipe', 'joueur', 'athl√®te', 'entra√Æneur', 'arbitre', 'supporter', 'victoire', 'd√©faite', 'match', 'comp√©tition', 'championnat', 'tournoi', 'coupe', 'm√©daille', 'troph√©e', 'record', 'performance', 'score', 'point', 'but', 'panier', 'essai', 'set', 'manche', 'round', 'p√©riode', 'mi-temps', 'prolongation', 'penalty', 'faute', 'carton', 'hors-jeu', 'rempla√ßant', 'titulaire', 'capitaine', 'gardien', 'aviron', 'cano√´', 'kayak', 'water-polo', 'triathlon', 'pentathlon', 'd√©cathlon', 'heptathlon']
            }
        };

        const conjugationQuestions = [
            { question: "Conjuguez 'manger' au pr√©sent avec 'je'", options: ["mange", "manges", "mangent"], answer: "mange", explanation: "Au pr√©sent, 'je' se conjugue sans 's' pour les verbes du 1er groupe" },
            { question: "Conjuguez 'aller' au pr√©sent avec 'tu'", options: ["vas", "va", "allons"], answer: "vas", explanation: "'Aller' est un verbe irr√©gulier. Avec 'tu', on dit 'tu vas'" },
            { question: "Conjuguez '√™tre' au pr√©sent avec 'il'", options: ["est", "es", "suis"], answer: "est", explanation: "'√ätre' est irr√©gulier. Avec 'il/elle', on dit 'il est'" },
            { question: "Conjuguez 'avoir' au pr√©sent avec 'nous'", options: ["avons", "avez", "ont"], answer: "avons", explanation: "Avec 'nous', 'avoir' devient 'nous avons'" },
            { question: "Conjuguez 'faire' au pr√©sent avec 'ils'", options: ["font", "fait", "faisons"], answer: "font", explanation: "Avec 'ils/elles', 'faire' devient 'ils font'" },
            { question: "Conjuguez 'finir' au pr√©sent avec 'vous'", options: ["finissez", "finissent", "finis"], answer: "finissez", explanation: "Les verbes du 2e groupe prennent '-issez' avec 'vous'" },
            { question: "Conjuguez 'venir' au pr√©sent avec 'je'", options: ["viens", "vient", "venons"], answer: "viens", explanation: "'Venir' est irr√©gulier. Avec 'je', on dit 'je viens'" },
            { question: "Conjuguez 'prendre' au pr√©sent avec 'elle'", options: ["prend", "prends", "prenons"], answer: "prend", explanation: "Avec 'il/elle', 'prendre' devient 'elle prend' (sans 's')" },
            { question: "Conjuguez 'pouvoir' au pr√©sent avec 'tu'", options: ["peux", "peut", "pouvons"], answer: "peux", explanation: "'Pouvoir' est irr√©gulier. Avec 'tu', on dit 'tu peux'" },
            { question: "Conjuguez 'dire' au pr√©sent avec 'nous'", options: ["disons", "disez", "disent"], answer: "disons", explanation: "Avec 'nous', 'dire' devient 'nous disons'" },
            { question: "Conjuguez 'savoir' au pass√© compos√© avec 'j''", options: ["j'ai su", "j'ai sait", "j'ai savoir"], answer: "j'ai su", explanation: "Le participe pass√© de 'savoir' est 'su'" },
            { question: "Conjuguez 'venir' au pass√© compos√© avec 'il'", options: ["il est venu", "il a venu", "il vient"], answer: "il est venu", explanation: "'Venir' se conjugue avec l'auxiliaire '√™tre'" },
            { question: "Conjuguez 'manger' au futur avec 'je'", options: ["mangerai", "mangerais", "mange"], answer: "mangerai", explanation: "Au futur, on ajoute '-ai' √† l'infinitif pour 'je'" },
            { question: "Conjuguez '√™tre' √† l'imparfait avec 'nous'", options: ["√©tions", "sommes", "serons"], answer: "√©tions", explanation: "√Ä l'imparfait, '√™tre' avec 'nous' donne 'nous √©tions'" },
            { question: "Conjuguez 'avoir' au conditionnel avec 'tu'", options: ["aurais", "auras", "avais"], answer: "aurais", explanation: "Au conditionnel, 'avoir' avec 'tu' donne 'tu aurais'" }
        ];

        const orthographyWords = {
            "100-most-common": [
                {word: "le", definition: "Article d√©fini masculin singulier"},
                {word: "de", definition: "Pr√©position marquant l'origine, la possession"},
                {word: "un", definition: "Article ind√©fini masculin singulier"},
                {word: "√†", definition: "Pr√©position marquant le lieu, le temps"},
                {word: "√™tre", definition: "Verbe d'√©tat fondamental"},
                {word: "et", definition: "Conjonction de coordination"},
                {word: "en", definition: "Pr√©position de lieu ou de temps"},
                {word: "avoir", definition: "Verbe d'action fondamental"},
                {word: "que", definition: "Pronom relatif ou conjonction"},
                {word: "pour", definition: "Pr√©position marquant le but"},
                {word: "dans", definition: "Pr√©position de lieu"},
                {word: "ce", definition: "D√©terminant ou pronom d√©monstratif"},
                {word: "il", definition: "Pronom personnel masculin"},
                {word: "une", definition: "Article ind√©fini f√©minin singulier"},
                {word: "sur", definition: "Pr√©position de lieu"},
                {word: "avec", definition: "Pr√©position d'accompagnement"},
                {word: "ne", definition: "Adverbe de n√©gation"},
                {word: "se", definition: "Pronom personnel r√©fl√©chi"},
                {word: "pas", definition: "Adverbe de n√©gation"},
                {word: "tout", definition: "D√©terminant ou pronom ind√©fini"},
                {word: "plus", definition: "Adverbe de quantit√©"},
                {word: "par", definition: "Pr√©position d'agent ou de moyen"},
                {word: "grand", definition: "Adjectif qualificatif"},
                {word: "comme", definition: "Adverbe de comparaison"},
                {word: "autre", definition: "Adjectif ou pronom ind√©fini"}
            ],
            verbs: [
                {word: "manger", definition: "Absorber de la nourriture"},
                {word: "boire", definition: "Absorber un liquide"},
                {word: "dormir", definition: "Se reposer en fermant les yeux"},
                {word: "marcher", definition: "Se d√©placer √† pied"},
                {word: "courir", definition: "Se d√©placer rapidement"},
                {word: "sauter", definition: "S'√©lever en l'air"},
                {word: "regarder", definition: "Diriger ses yeux vers"},
                {word: "√©couter", definition: "Pr√™ter attention aux sons"},
                {word: "parler", definition: "S'exprimer par la parole"},
                {word: "chanter", definition: "Produire des sons m√©lodieux"},
                {word: "danser", definition: "Bouger en rythme"},
                {word: "jouer", definition: "S'amuser, pratiquer un jeu"},
                {word: "travailler", definition: "Exercer une activit√© professionnelle"},
                {word: "√©tudier", definition: "Apprendre, r√©viser"},
                {word: "lire", definition: "D√©chiffrer un texte"},
                {word: "√©crire", definition: "Tracer des lettres, des mots"},
                {word: "dessiner", definition: "Cr√©er une image"},
                {word: "peindre", definition: "Appliquer de la couleur"},
                {word: "construire", definition: "√âdifier, b√¢tir"},
                {word: "d√©truire", definition: "D√©molir, an√©antir"}
            ],
            adjectives: [
                {word: "beau", definition: "Qui pla√Æt √† l'≈ìil"},
                {word: "grand", definition: "De taille importante"},
                {word: "petit", definition: "De petite taille"},
                {word: "bon", definition: "De bonne qualit√©"},
                {word: "mauvais", definition: "De mauvaise qualit√©"},
                {word: "nouveau", definition: "R√©cent, qui vient d'appara√Ætre"},
                {word: "vieux", definition: "√Çg√©, ancien"},
                {word: "jeune", definition: "De peu d'√¢ge"},
                {word: "heureux", definition: "Qui √©prouve du bonheur"},
                {word: "triste", definition: "Qui √©prouve de la tristesse"},
                {word: "intelligent", definition: "Dou√© de raison"},
                {word: "stupide", definition: "Qui manque d'intelligence"},
                {word: "fort", definition: "Qui a de la force"},
                {word: "faible", definition: "Qui manque de force"},
                {word: "rapide", definition: "Qui va vite"},
                {word: "lent", definition: "Qui va doucement"},
                {word: "chaud", definition: "De temp√©rature √©lev√©e"},
                {word: "froid", definition: "De basse temp√©rature"},
                {word: "doux", definition: "Agr√©able au toucher"},
                {word: "dur", definition: "Qui r√©siste √† la pression"}
            ],
            difficult: [
                {word: "yaourt", definition: "Produit laitier ferment√©"},
                {word: "rythme", definition: "Cadence, tempo"},
                {word: "sympt√¥me", definition: "Signe d'une maladie"},
                {word: "parall√®le", definition: "Qui ne se rencontre jamais"},
                {word: "d√©veloppement", definition: "Action de d√©velopper"},
                {word: "√©v√©nement", definition: "Ce qui arrive"},
                {word: "diff√©rent", definition: "Qui n'est pas semblable"},
                {word: "caract√®re", definition: "Trait distinctif"},
                {word: "myst√®re", definition: "Ce qui est inexpliqu√©"},
                {word: "th√©√¢tre", definition: "Art dramatique"},
                {word: "biblioth√®que", definition: "Lieu o√π sont conserv√©s les livres"},
                {word: "orthographe", definition: "Mani√®re d'√©crire les mots"},
                {word: "philosophie", definition: "Recherche de la sagesse"},
                {word: "psychologie", definition: "√âtude de l'esprit"},
                {word: "g√©ographie", definition: "Science de la Terre"},
                {word: "math√©matiques", definition: "Science des nombres"},
                {word: "gymnastique", definition: "Exercices corporels"},
                {word: "pneumatique", definition: "Relatif √† l'air comprim√©"},
                {word: "xylophone", definition: "Instrument de musique"},
                {word: "chrysanth√®me", definition: "Fleur d'automne"}
            ]
        };

        const grammarRules = {
            accents: {
                title: "Les Accents en Fran√ßais",
                explanation: "Les accents modifient la prononciation et parfois le sens des mots.",
                rules: [
                    "L'accent aigu (√©) : se place sur le 'e' ferm√© (caf√©, √©t√©)",
                    "L'accent grave (√®) : se place sur le 'e' ouvert (m√®re, tr√®s)",
                    "L'accent circonflexe (√™) : remplace souvent une lettre disparue (for√™t, h√¥pital)",
                    "Le tr√©ma (√´) : s√©pare deux voyelles (No√´l, na√Øf)"
                ],
                exercises: [
                    {question: "Quel accent pour 'caf_' ?", options: ["√©", "√®", "√™"], answer: "√©"},
                    {question: "Quel accent pour 'm_re' ?", options: ["√©", "√®", "√™"], answer: "√®"},
                    {question: "Quel accent pour 'for_t' ?", options: ["√©", "√®", "√™"], answer: "√™"}
                ]
            },
            homophones: {
                title: "Les Homophones",
                explanation: "Mots qui se prononcent de la m√™me fa√ßon mais s'√©crivent diff√©remment.",
                rules: [
                    "√† (pr√©position) / a (verbe avoir) : 'Il a un chat' / 'Il va √† l'√©cole'",
                    "et (conjonction) / est (verbe √™tre) : 'Paul et Marie' / 'Il est grand'",
                    "son (possessif) / sont (verbe √™tre) : 'Son livre' / 'Ils sont l√†'",
                    "ou (choix) / o√π (lieu) : 'Th√© ou caf√© ?' / 'O√π vas-tu ?'"
                ],
                exercises: [
                    {question: "Il _ un chien", options: ["a", "√†"], answer: "a"},
                    {question: "Marie _ Pierre", options: ["et", "est"], answer: "et"},
                    {question: "Ils _ partis", options: ["son", "sont"], answer: "sont"}
                ]
            },
            plurals: {
                title: "Les Pluriels",
                explanation: "Formation du pluriel des noms et adjectifs.",
                rules: [
                    "R√®gle g√©n√©rale : ajouter -s (chat ‚Üí chats)",
                    "Mots en -eau, -au, -eu : ajouter -x (bateau ‚Üí bateaux)",
                    "Mots en -al : -al devient -aux (cheval ‚Üí chevaux)",
                    "Exceptions : pneu ‚Üí pneus, bleu ‚Üí bleus"
                ],
                exercises: [
                    {question: "Pluriel de 'chat'", options: ["chats", "chatx", "chat"], answer: "chats"},
                    {question: "Pluriel de 'bateau'", options: ["bateaus", "bateaux", "bateau"], answer: "bateaux"},
                    {question: "Pluriel de 'cheval'", options: ["chevals", "chevaux", "chevales"], answer: "chevaux"}
                ]
            },
            agreements: {
                title: "Les Accords",
                explanation: "R√®gles d'accord du participe pass√©.",
                rules: [
                    "Avec √™tre : accord avec le sujet (Elle est partie)",
                    "Avec avoir : pas d'accord sauf si COD plac√© avant",
                    "COD avant le verbe : accord (Les fleurs qu'il a cueillies)",
                    "Verbes pronominaux : r√®gles particuli√®res"
                ],
                exercises: [
                    {question: "Elle est parti_", options: ["e", "", "es"], answer: "e"},
                    {question: "Ils ont mang_", options: ["√©", "√©s", "√©es"], answer: "√©"},
                    {question: "Les pommes qu'il a mang_", options: ["√©", "√©es", "√©s"], answer: "√©es"}
                ]
            }
        };

        // State management
        let currentQuiz = null;
        let currentQuestionIndex = 0;
        let quizScore = 0;
        let quizAnswers = [];
        let isListening = false;

        // Dark mode detection
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });

        // Smooth scrolling for navigation
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });

        // Intersection Observer for animations
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-slide-in');
                }
            });
        }, observerOptions);

        document.querySelectorAll('.section-container, .card').forEach(el => {
            observer.observe(el);
        });

        // Quiz functions
        function startAdaptiveQuiz() {
            const quizContainer = document.getElementById('adaptive-quiz');
            quizContainer.classList.remove('hidden');
            currentQuiz = 'adaptive';
            currentQuestionIndex = 0;
            quizScore = 0;
            quizAnswers = [];
            loadNextQuestion();
        }

        function loadNextQuestion() {
            if (currentQuestionIndex >= conjugationQuestions.length) {
                showQuizResults();
                return;
            }

            const question = conjugationQuestions[currentQuestionIndex];
            document.getElementById('quiz-question').textContent = question.question;
            
            const optionsContainer = document.getElementById('quiz-options');
            optionsContainer.innerHTML = '';
            
            question.options.forEach(option => {
                const optionElement = document.createElement('div');
                optionElement.className = 'quiz-option';
                optionElement.textContent = option;
                optionElement.onclick = () => selectQuizOption(optionElement, option);
                optionsContainer.appendChild(optionElement);
            });

            updateQuizProgress();
        }

        function selectQuizOption(element, option) {
            document.querySelectorAll('.quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            element.dataset.selected = option;
        }

        function checkAnswer() {
            const selectedOption = document.querySelector('.quiz-option.selected');
            if (!selectedOption) {
                showFeedback("Veuillez s√©lectionner une r√©ponse.", "warning");
                return;
            }

            const question = conjugationQuestions[currentQuestionIndex];
            const userAnswer = selectedOption.dataset.selected;
            const isCorrect = userAnswer === question.answer;
            
            if (isCorrect) {
                quizScore++;
                showFeedback(`‚úÖ Correct ! ${question.explanation}`, "success");
            } else {
                showFeedback(`‚ùå Incorrect. ${question.explanation}`, "error");
            }

            quizAnswers.push({
                question: question.question,
                userAnswer,
                correctAnswer: question.answer,
                isCorrect
            });

            setTimeout(() => {
                currentQuestionIndex++;
                loadNextQuestion();
            }, 3000);
        }

        function nextQuestion() {
            if (currentQuestionIndex < conjugationQuestions.length - 1) {
                currentQuestionIndex++;
                loadNextQuestion();
            }
        }

        function updateQuizProgress() {
            const progress = ((currentQuestionIndex + 1) / conjugationQuestions.length) * 100;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            document.getElementById('quiz-score').textContent = `${quizScore}/${currentQuestionIndex + 1}`;
        }

        function showQuizResults() {
            const percentage = Math.round((quizScore / conjugationQuestions.length) * 100);
            let message = `Quiz termin√© ! Score : ${quizScore}/${conjugationQuestions.length} (${percentage}%)`;
            
            if (percentage >= 80) {
                message += " üéâ Excellent travail !";
            } else if (percentage >= 60) {
                message += " üëç Bon travail !";
            } else {
                message += " üí™ Continuez √† vous entra√Æner !";
            }

            showFeedback(message, "info");
            updatePerformanceChart();
        }

        function updatePerformanceChart() {
            const ctx = document.getElementById('performance-chart');
            if (ctx) {
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: ['Bonnes r√©ponses', 'Mauvaises r√©ponses'],
                        datasets: [{
                            data: [quizScore, conjugationQuestions.length - quizScore],
                            backgroundColor: ['#4ade80', '#f87171']
                        }]
                    },
                    options: {
                        responsive: true,
                        plugins: {
                            legend: {
                                position: 'bottom'
                            }
                        }
                    }
                });
            }
        }

        function practiceTense(tense) {
            const practiceContainer = document.getElementById('tense-practice');
            const explanationContainer = document.getElementById('tense-explanation');
            const exercisesContainer = document.getElementById('tense-exercises');
            
            const tenseData = {
                'present': {
                    title: 'Le Pr√©sent de l\'Indicatif',
                    explanation: 'Le pr√©sent exprime une action qui se d√©roule au moment o√π l\'on parle, une v√©rit√© g√©n√©rale ou une habitude.',
                    examples: ['Je mange une pomme.', 'Il fait beau.', 'Nous habitons √† Paris.'],
                    exercises: [
                        {verb: 'parler', pronoun: 'tu', answer: 'parles'},
                        {verb: 'finir', pronoun: 'elle', answer: 'finit'},
                        {verb: 'prendre', pronoun: 'nous', answer: 'prenons'}
                    ]
                },
                'pass√©-compos√©': {
                    title: 'Le Pass√© Compos√©',
                    explanation: 'Le pass√© compos√© exprime une action accomplie dans le pass√©. Il se forme avec l\'auxiliaire √™tre ou avoir + participe pass√©.',
                    examples: ['J\'ai mang√© hier.', 'Elle est partie t√¥t.', 'Nous avons fini le travail.'],
                    exercises: [
                        {verb: 'manger', pronoun: 'j\'', answer: 'ai mang√©'},
                        {verb: 'aller', pronoun: 'il', answer: 'est all√©'},
                        {verb: 'voir', pronoun: 'vous', answer: 'avez vu'}
                    ]
                },
                'imparfait': {
                    title: 'L\'Imparfait',
                    explanation: 'L\'imparfait exprime une action habituelle dans le pass√© ou qui √©tait en cours d\'accomplissement.',
                    examples: ['Je mangeais souvent des bonbons.', 'Il pleuvait ce jour-l√†.', 'Nous √©tions heureux.'],
                    exercises: [
                        {verb: 'jouer', pronoun: 'je', answer: 'jouais'},
                        {verb: '√™tre', pronoun: 'tu', answer: '√©tais'},
                        {verb: 'avoir', pronoun: 'ils', answer: 'avaient'}
                    ]
                },
                'futur': {
                    title: 'Le Futur Simple',
                    explanation: 'Le futur simple exprime une action qui aura lieu dans l\'avenir.',
                    examples: ['Je mangerai demain.', 'Il viendra nous voir.', 'Nous partirons en vacances.'],
                    exercises: [
                        {verb: 'chanter', pronoun: 'elle', answer: 'chantera'},
                        {verb: 'venir', pronoun: 'nous', answer: 'viendrons'},
                        {verb: 'pouvoir', pronoun: 'vous', answer: 'pourrez'}
                    ]
                }
            };

            const data = tenseData[tense];
            if (!data) return;

            explanationContainer.innerHTML = `
                <h4 class="font-bold text-lg mb-2">${data.title}</h4>
                <p class="mb-3">${data.explanation}</p>
                <div class="mb-3">
                    <strong>Exemples :</strong>
                    <ul class="list-disc list-inside ml-4">
                        ${data.examples.map(ex => `<li>${ex}</li>`).join('')}
                    </ul>
                </div>
            `;

            exercisesContainer.innerHTML = `
                <h5 class="font-bold mb-3">Exercices pratiques :</h5>
                <div id="tense-current-exercise" class="mb-4"></div>
                <button class="btn btn-primary mr-2" onclick="checkTenseAnswer()">V√©rifier</button>
                <button class="btn btn-info" onclick="nextTenseExercise()">Suivant</button>
                <div id="tense-feedback" class="mt-4"></div>
            `;

            window.currentTenseExercises = data.exercises;
            window.currentTenseIndex = 0;
            loadTenseExercise();
            
            practiceContainer.classList.remove('hidden');
            practiceContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function loadTenseExercise() {
            if (!window.currentTenseExercises || window.currentTenseIndex >= window.currentTenseExercises.length) {
                document.getElementById('tense-current-exercise').innerHTML = '<p class="text-green-600 font-bold">üéâ F√©licitations ! Vous avez termin√© tous les exercices !</p>';
                return;
            }

            const exercise = window.currentTenseExercises[window.currentTenseIndex];
            document.getElementById('tense-current-exercise').innerHTML = `
                <div class="p-4 bg-gray-50 rounded-lg">
                    <p class="mb-3">Conjuguez le verbe <strong>"${exercise.verb}"</strong> avec <strong>"${exercise.pronoun}"</strong> :</p>
                    <input type="text" id="tense-answer" class="w-full p-2 text-base border rounded-lg" placeholder="Votre r√©ponse...">
                </div>
            `;
        }

        function checkTenseAnswer() {
            const input = document.getElementById('tense-answer');
            const userAnswer = input.value.trim().toLowerCase();
            const exercise = window.currentTenseExercises[window.currentTenseIndex];
            const correctAnswer = exercise.answer.toLowerCase();

            const feedback = document.getElementById('tense-feedback');
            if (userAnswer === correctAnswer) {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Excellent ! Bonne r√©ponse.</p>';
                feedback.className = 'mt-4 p-3 bg-green-50 rounded-lg';
            } else {
                feedback.innerHTML = `<p class="text-red-600 font-bold">‚ùå Incorrect. La bonne r√©ponse est : <strong>${exercise.answer}</strong></p>`;
                feedback.className = 'mt-4 p-3 bg-red-50 rounded-lg';
            }
        }

        function nextTenseExercise() {
            window.currentTenseIndex++;
            loadTenseExercise();
            document.getElementById('tense-feedback').innerHTML = '';
        }

        // Voice recognition functions
        function startListening() {
            if (isListening) return;
            
            const wordElement = document.getElementById('word-to-pronounce');
            const feedbackElement = document.getElementById('voice-feedback');
            const voiceBtn = document.getElementById('voice-btn');
            
            if (!('webkitSpeechRecognition' in window) && !('SpeechRecognition' in window)) {
                showFeedback("La reconnaissance vocale n'est pas support√©e par votre navigateur.", "error");
                return;
            }

            const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
            recognition.lang = 'fr-FR';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;

            isListening = true;
            voiceBtn.innerHTML = '<i class="fas fa-stop mr-2"></i>Arr√™ter';
            voiceBtn.classList.remove('btn-danger');
            voiceBtn.classList.add('btn-warning');
            feedbackElement.innerHTML = 'üé§ Parlez maintenant...';

            recognition.start();

            recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript.trim().toLowerCase();
                const expected = wordElement.textContent.toLowerCase();
                const confidence = event.results[0][0].confidence;

                if (transcript === expected) {
                    feedbackElement.innerHTML = `‚úÖ Parfait ! Vous avez dit "${transcript}" (Confiance: ${Math.round(confidence * 100)}%)`;
                    feedbackElement.className = 'text-green-600 font-bold';
                } else {
                    feedbackElement.innerHTML = `‚ùå Vous avez dit "${transcript}". Essayez de prononcer "${expected}"`;
                    feedbackElement.className = 'text-red-600 font-bold';
                    showPronunciationTips(expected);
                }
                
                resetVoiceButton();
            };

            recognition.onerror = (event) => {
                feedbackElement.innerHTML = '‚ùå Erreur de reconnaissance. Veuillez r√©essayer.';
                feedbackElement.className = 'text-red-600 font-bold';
                resetVoiceButton();
            };

            recognition.onend = () => {
                resetVoiceButton();
            };
        }

        function resetVoiceButton() {
            isListening = false;
            const voiceBtn = document.getElementById('voice-btn');
            voiceBtn.innerHTML = '<i class="fas fa-microphone mr-2"></i>Enregistrer';
            voiceBtn.classList.remove('btn-warning');
            voiceBtn.classList.add('btn-danger');
        }

        function showPronunciationTips(word) {
            const tipsContainer = document.getElementById('pronunciation-tips');
            const tipContent = document.getElementById('tip-content');
            
            const tips = {
                'je mange': 'Prononcez "jeu man-je" avec un "j" doux et un "g" comme dans "garage"',
                'tu vas': 'Prononcez "tu va" - le "s" ne se prononce pas √† la fin',
                'il est': 'Prononcez "i-l√®" en liant les deux mots'
            };

            if (tips[word]) {
                tipContent.textContent = tips[word];
                tipsContainer.classList.remove('hidden');
            }
        }

        function generateRandomWordToPronounce() {
            const commonWords = ['je mange', 'tu vas', 'il est', 'nous avons', 'vous √™tes', 'ils font', 'elle parle', 'on dit', 'je suis', 'tu fais'];
            const randomWord = commonWords[Math.floor(Math.random() * commonWords.length)];
            document.getElementById('word-to-pronounce').textContent = randomWord;
        }

        // Dictation functions
        function startDictation() {
            document.getElementById('dictation-exercise').classList.remove('hidden');
            const sentences = [
                "Le chat mange sa nourriture.",
                "Les enfants jouent dans le jardin.",
                "Ma m√®re pr√©pare le d√Æner.",
                "Nous allons √† l'√©cole en bus.",
                "Il fait beau aujourd'hui.",
                "La voiture rouge roule vite.",
                "Je lis un livre int√©ressant.",
                "Elle chante une belle chanson.",
                "Nous √©tudions le fran√ßais.",
                "Ils habitent pr√®s de la mer."
            ];
            window.currentDictationSentence = sentences[Math.floor(Math.random() * sentences.length)];
            setupDictationAudio();
        }

        function setupDictationAudio() {
            document.getElementById('play-audio').onclick = () => {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(window.currentDictationSentence);
                    utterance.lang = 'fr-FR';
                    utterance.rate = 0.9;
                    speechSynthesis.speak(utterance);
                }
            };
        }

        function playSlowly() {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(window.currentDictationSentence);
                utterance.lang = 'fr-FR';
                utterance.rate = 0.6;
                speechSynthesis.speak(utterance);
            }
        }

        function checkDictation() {
            const userText = document.getElementById('dictation-text').value.trim();
            const correctText = window.currentDictationSentence;
            const feedback = document.getElementById('dictation-feedback');
            
            if (userText.toLowerCase() === correctText.toLowerCase()) {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Parfait ! Dict√©e r√©ussie.</p>';
                feedback.className = 'mt-4 p-3 bg-green-50 rounded-lg';
            } else {
                const errors = findDictationErrors(userText, correctText);
                feedback.innerHTML = `
                    <p class="text-red-600 font-bold">‚ùå Quelques erreurs d√©tect√©es :</p>
                    <p class="mt-2"><strong>Votre texte :</strong> ${userText}</p>
                    <p><strong>Texte correct :</strong> ${correctText}</p>
                    <div class="mt-2">${errors}</div>
                `;
                feedback.className = 'mt-4 p-3 bg-red-50 rounded-lg';
            }
        }

        function findDictationErrors(userText, correctText) {
            const userWords = userText.toLowerCase().split(' ');
            const correctWords = correctText.toLowerCase().split(' ');
            const errors = [];
            
            for (let i = 0; i < Math.max(userWords.length, correctWords.length); i++) {
                if (userWords[i] !== correctWords[i]) {
                    errors.push(`Mot ${i + 1}: "${userWords[i] || 'manquant'}" ‚Üí "${correctWords[i] || 'en trop'}"`);
                }
            }
            
            return errors.length > 0 ? errors.slice(0, 3).join('<br>') : 'Erreurs mineures de ponctuation ou d\'espacement.';
        }

        // Orthography functions
        function practiceWordCategory(category) {
            const words = orthographyWords[category];
            if (!words) return;

            const practiceContainer = document.getElementById('word-practice');
            window.currentWordCategory = words;
            window.currentWordIndex = 0;
            
            loadWordChallenge();
            practiceContainer.classList.remove('hidden');
            practiceContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function loadWordChallenge() {
            if (!window.currentWordCategory || window.currentWordIndex >= window.currentWordCategory.length) {
                document.getElementById('word-challenge').innerHTML = '<p class="text-green-600 font-bold">üéâ Bravo ! Vous avez termin√© cette cat√©gorie !</p>';
                return;
            }

            const word = window.currentWordCategory[window.currentWordIndex];
            document.getElementById('word-definition').textContent = word.definition;
            document.getElementById('word-input').value = '';
            document.getElementById('word-feedback').innerHTML = '';
        }

        function checkWord() {
            const input = document.getElementById('word-input');
            const userAnswer = input.value.trim().toLowerCase();
            const word = window.currentWordCategory[window.currentWordIndex];
            const correctAnswer = word.word.toLowerCase();

            const feedback = document.getElementById('word-feedback');
            if (userAnswer === correctAnswer) {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Parfait ! Continuez comme √ßa.</p>';
                feedback.className = 'mt-4 p-3 bg-green-50 rounded-lg';
                setTimeout(() => {
                    window.currentWordIndex++;
                    loadWordChallenge();
                }, 2000);
            } else {
                feedback.innerHTML = `<p class="text-red-600 font-bold">‚ùå Incorrect. Le mot √©tait : <strong>${word.word}</strong></p>`;
                feedback.className = 'mt-4 p-3 bg-red-50 rounded-lg';
            }
        }

        function learnRule(rule) {
            const ruleData = grammarRules[rule];
            if (!ruleData) return;

            const explanationContainer = document.getElementById('rule-explanation');
            const contentContainer = document.getElementById('rule-content');
            const exercisesContainer = document.getElementById('rule-exercises');

            contentContainer.innerHTML = `
                <h4 class="font-bold text-lg mb-3">${ruleData.title}</h4>
                <p class="mb-4">${ruleData.explanation}</p>
                <div class="mb-4">
                    <strong>R√®gles importantes :</strong>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        ${ruleData.rules.map(r => `<li>${r}</li>`).join('')}
                    </ul>
                </div>
            `;

            if (ruleData.exercises) {
                exercisesContainer.innerHTML = `
                    <h5 class="font-bold mb-3">Exercices pratiques :</h5>
                    <div id="rule-current-exercise"></div>
                    <div class="text-center mt-4">
                        <button class="btn btn-primary mr-2" onclick="checkRuleAnswer()">V√©rifier</button>
                        <button class="btn btn-info" onclick="nextRuleExercise()">Suivant</button>
                    </div>
                    <div id="rule-feedback" class="mt-4"></div>
                `;

                window.currentRuleExercises = ruleData.exercises;
                window.currentRuleIndex = 0;
                loadRuleExercise();
            }

            explanationContainer.classList.remove('hidden');
            explanationContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function loadRuleExercise() {
            if (!window.currentRuleExercises || window.currentRuleIndex >= window.currentRuleExercises.length) {
                document.getElementById('rule-current-exercise').innerHTML = '<p class="text-green-600 font-bold">üéâ Excellente ma√Ætrise de cette r√®gle !</p>';
                return;
            }

            const exercise = window.currentRuleExercises[window.currentRuleIndex];
            document.getElementById('rule-current-exercise').innerHTML = `
                <div class="quiz-question">${exercise.question}</div>
                <div class="quiz-options" id="rule-options">
                    ${exercise.options.map(option => `
                        <div class="quiz-option" onclick="selectRuleOption(this, '${option}')">${option}</div>
                    `).join('')}
                </div>
            `;
        }

        function selectRuleOption(element, option) {
            document.querySelectorAll('#rule-options .quiz-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            element.classList.add('selected');
            element.dataset.selected = option;
        }

        function checkRuleAnswer() {
            const selectedOption = document.querySelector('#rule-options .quiz-option.selected');
            if (!selectedOption) {
                document.getElementById('rule-feedback').innerHTML = '<p class="text-yellow-600">Veuillez s√©lectionner une r√©ponse.</p>';
                return;
            }

            const exercise = window.currentRuleExercises[window.currentRuleIndex];
            const userAnswer = selectedOption.dataset.selected;
            const feedback = document.getElementById('rule-feedback');

            if (userAnswer === exercise.answer) {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Correct ! Bien jou√©.</p>';
                feedback.className = 'mt-4 p-3 bg-green-50 rounded-lg';
            } else {
                feedback.innerHTML = `<p class="text-red-600 font-bold">‚ùå Incorrect. La bonne r√©ponse est : <strong>${exercise.answer}</strong></p>`;
                feedback.className = 'mt-4 p-3 bg-red-50 rounded-lg';
            }
        }

        function nextRuleExercise() {
            window.currentRuleIndex++;
            loadRuleExercise();
            document.getElementById('rule-feedback').innerHTML = '';
        }

        // Grammar functions
        function startGrammarAnalysis() {
            document.getElementById('grammar-analysis').classList.remove('hidden');
            generateSentenceToAnalyze();
        }

        function generateSentenceToAnalyze() {
            const sentences = [
                "Le chat noir mange sa nourriture.",
                "Les enfants jouent joyeusement dans le grand jardin.",
                "Ma gentille m√®re pr√©pare d√©licieusement le d√Æner.",
                "Nous allons rapidement √† l'√©cole en bus.",
                "Il fait tr√®s beau aujourd'hui.",
                "Cette belle fleur pousse lentement.",
                "Mon petit fr√®re court vite.",
                "La voiture rouge roule doucement."
            ];
            const sentence = sentences[Math.floor(Math.random() * sentences.length)];
            document.getElementById('sentence-to-analyze').textContent = sentence;
            createWordHighlighting(sentence);
        }

        function createWordHighlighting(sentence) {
            const words = sentence.split(' ');
            const highlightContainer = document.getElementById('word-highlighting');
            highlightContainer.innerHTML = '';
            
            words.forEach((word, index) => {
                const span = document.createElement('span');
                span.textContent = word + ' ';
                span.className = 'cursor-pointer hover:bg-yellow-200 p-1 rounded transition-colors';
                span.onclick = () => highlightWord(span, word);
                highlightContainer.appendChild(span);
            });
        }

        function highlightWord(element, word) {
            // Remove previous selections
            document.querySelectorAll('#word-highlighting span').forEach(span => {
                span.className = 'cursor-pointer hover:bg-yellow-200 p-1 rounded transition-colors';
            });
            
            element.className = 'cursor-pointer bg-blue-200 p-1 rounded';
            
            // Show word analysis
            const analysis = analyzeWord(word);
            document.getElementById('analysis-feedback').innerHTML = `
                <div class="p-4 bg-blue-50 rounded-lg">
                    <p><strong>Mot s√©lectionn√© :</strong> ${word}</p>
                    <p><strong>Nature :</strong> ${analysis.nature}</p>
                    <p><strong>Fonction possible :</strong> ${analysis.fonction}</p>
                    <p><strong>Explication :</strong> ${analysis.explication}</p>
                </div>
            `;
        }

        function analyzeWord(word) {
            const cleanWord = word.replace(/[.,!?;:]/, '').toLowerCase();
            
            const determinants = ['le', 'la', 'les', 'un', 'une', 'des', 'ce', 'cette', 'ces', 'mon', 'ma', 'mes', 'ton', 'ta', 'tes', 'son', 'sa', 'ses'];
            const noms = ['chat', 'enfants', 'm√®re', 'jardin', '√©cole', 'bus', 'nourriture', 'd√Æner', 'fleur', 'fr√®re', 'voiture'];
            const verbes = ['mange', 'jouent', 'pr√©pare', 'allons', 'fait', 'est', 'sont', 'pousse', 'court', 'roule'];
            const adjectifs = ['noir', 'grand', 'gentille', 'beau', 'belle', 'petit', 'rouge'];
            const adverbes = ['tr√®s', 'joyeusement', 'rapidement', 'd√©licieusement', 'aujourd\'hui', 'lentement', 'vite', 'doucement'];
            
            if (determinants.includes(cleanWord)) {
                return {
                    nature: 'D√©terminant',
                    fonction: 'Pr√©cise le nom',
                    explication: 'Accompagne le nom et indique le genre et le nombre'
                };
            }
            if (noms.includes(cleanWord)) {
                return {
                    nature: 'Nom',
                    fonction: 'Sujet ou compl√©ment',
                    explication: 'D√©signe une personne, un animal, une chose ou une id√©e'
                };
            }
            if (verbes.includes(cleanWord)) {
                return {
                    nature: 'Verbe',
                    fonction: 'Pr√©dicat',
                    explication: 'Exprime une action, un √©tat ou un devenir'
                };
            }
            if (adjectifs.includes(cleanWord)) {
                return {
                    nature: 'Adjectif',
                    fonction: '√âpith√®te ou attribut',
                    explication: 'Qualifie ou caract√©rise le nom'
                };
            }
            if (adverbes.includes(cleanWord)) {
                return {
                    nature: 'Adverbe',
                    fonction: 'Compl√©ment circonstanciel',
                    explication: 'Modifie le sens du verbe, de l\'adjectif ou d\'un autre adverbe'
                };
            }
            
            return {
                nature: 'Mot invariable',
                fonction: 'Diverses fonctions',
                explication: 'Pr√©position, conjonction ou autre mot-outil'
            };
        }

        function generateNewSentence() {
            generateSentenceToAnalyze();
            document.getElementById('analysis-feedback').innerHTML = '';
        }

        function startSentenceBuilder() {
            document.getElementById('sentence-builder').classList.remove('hidden');
            generateSentenceChallenge();
        }

        function generateSentenceChallenge() {
            const challenges = [
                {
                    target: "Construisez une phrase avec sujet + verbe + compl√©ment",
                    words: ["Le", "chat", "mange", "sa", "nourriture", "d√©licieusement"],
                    solution: "Le chat mange d√©licieusement sa nourriture"
                },
                {
                    target: "Formez une phrase interrogative",
                    words: ["O√π", "vas", "tu", "?", "aujourd'hui"],
                    solution: "O√π vas-tu aujourd'hui ?"
                },
                {
                    target: "Cr√©ez une phrase avec un adjectif",
                    words: ["Les", "enfants", "jouent", "dans", "le", "grand", "jardin"],
                    solution: "Les enfants jouent dans le grand jardin"
                },
                {
                    target: "Construisez une phrase n√©gative",
                    words: ["Je", "ne", "mange", "pas", "de", "l√©gumes"],
                    solution: "Je ne mange pas de l√©gumes"
                }
            ];
            
            const challenge = challenges[Math.floor(Math.random() * challenges.length)];
            window.currentSentenceChallenge = challenge;
            
            document.getElementById('sentence-target').textContent = challenge.target;
            
            const wordsContainer = document.getElementById('available-words');
            wordsContainer.innerHTML = '';
            
            challenge.words.forEach(word => {
                const wordElement = document.createElement('span');
                wordElement.className = 'bg-blue-100 hover:bg-blue-200 px-3 py-1 rounded-full cursor-pointer transition-colors';
                wordElement.textContent = word;
                wordElement.onclick = () => addWordToSentence(word, wordElement);
                wordsContainer.appendChild(wordElement);
            });
            
            document.getElementById('constructed-sentence').innerHTML = '';
        }

        function addWordToSentence(word, element) {
            const constructedContainer = document.getElementById('constructed-sentence');
            const wordElement = document.createElement('span');
            wordElement.className = 'bg-green-100 hover:bg-green-200 px-3 py-1 rounded-full cursor-pointer transition-colors';
            wordElement.textContent = word;
            wordElement.onclick = () => removeWordFromSentence(wordElement, word);
            
            constructedContainer.appendChild(wordElement);
            element.style.display = 'none';
        }

        function removeWordFromSentence(element, word) {
            element.remove();
            
            // Show the word back in available words
            const availableWords = document.getElementById('available-words');
            Array.from(availableWords.children).forEach(child => {
                if (child.textContent === word) {
                    child.style.display = 'inline-block';
                }
            });
        }

        function checkSentence() {
            const constructedWords = Array.from(document.getElementById('constructed-sentence').children)
                .map(el => el.textContent);
            const userSentence = constructedWords.join(' ');
            const correctSentence = window.currentSentenceChallenge.solution;
            
            const feedback = document.getElementById('sentence-feedback');
            if (userSentence === correctSentence) {
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Parfait ! Phrase correctement construite.</p>';
                feedback.className = 'mt-4 p-3 bg-green-50 rounded-lg';
            } else {
                feedback.innerHTML = `
                    <p class="text-orange-600 font-bold">‚ö†Ô∏è Phrase √† am√©liorer</p>
                    <p><strong>Votre phrase :</strong> ${userSentence}</p>
                    <p><strong>Suggestion :</strong> ${correctSentence}</p>
                `;
                feedback.className = 'mt-4 p-3 bg-orange-50 rounded-lg';
            }
        }

        function clearSentence() {
            document.getElementById('constructed-sentence').innerHTML = '';
            Array.from(document.getElementById('available-words').children).forEach(child => {
                child.style.display = 'inline-block';
            });
            document.getElementById('sentence-feedback').innerHTML = '';
        }

        function exploreTensesAndModes() {
            document.getElementById('tenses-modes').classList.remove('hidden');
        }

        function exploreMode(mode) {
            const modeData = {
                indicatif: {
                    title: 'Le Mode Indicatif',
                    explanation: 'Le mode de la r√©alit√© et de la certitude. Il pr√©sente les faits comme r√©els.',
                    tenses: ['Pr√©sent', 'Pass√© compos√©', 'Imparfait', 'Plus-que-parfait', 'Pass√© simple', 'Futur simple', 'Futur ant√©rieur'],
                    examples: ['Je mange (pr√©sent)', 'J\'ai mang√© (pass√© compos√©)', 'Je mangeais (imparfait)', 'Je mangerai (futur)']
                },
                subjonctif: {
                    title: 'Le Mode Subjonctif',
                    explanation: 'Le mode du doute, de l\'√©motion, de la volont√© et du jugement.',
                    tenses: ['Pr√©sent', 'Pass√©', 'Imparfait', 'Plus-que-parfait'],
                    examples: ['Il faut que je mange', 'Je doute qu\'il vienne', 'Bien qu\'il soit tard', 'Pourvu qu\'elle r√©ussisse']
                },
                conditionnel: {
                    title: 'Le Mode Conditionnel',
                    explanation: 'Le mode de l\'hypoth√®se, de la politesse et de l\'imaginaire.',
                    tenses: ['Pr√©sent', 'Pass√© premi√®re forme', 'Pass√© deuxi√®me forme'],
                    examples: ['Je mangerais si j\'avais faim', 'Pourriez-vous m\'aider ?', 'J\'aurais aim√© venir', 'Si j\'√©tais riche, je voyagerais']
                },
                imperatif: {
                    title: 'Le Mode Imp√©ratif',
                    explanation: 'Le mode de l\'ordre, du conseil et de la pri√®re.',
                    tenses: ['Pr√©sent', 'Pass√©'],
                    examples: ['Mange !', 'Mangeons ensemble', 'Mangez vite', 'Sois sage', 'Ayez confiance']
                }
            };

            const data = modeData[mode];
            if (!data) return;

            const explanationContainer = document.getElementById('mode-explanation');
            const contentContainer = document.getElementById('mode-content');
            const exercisesContainer = document.getElementById('mode-exercises');

            contentContainer.innerHTML = `
                <h4 class="font-bold text-lg mb-3">${data.title}</h4>
                <p class="mb-4">${data.explanation}</p>
                <div class="mb-4">
                    <strong>Temps disponibles :</strong>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        ${data.tenses.map(t => `<li>${t}</li>`).join('')}
                    </ul>
                </div>
                <div>
                    <strong>Exemples :</strong>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        ${data.examples.map(e => `<li>${e}</li>`).join('')}
                    </ul>
                </div>
            `;

            exercisesContainer.innerHTML = `
                <h5 class="font-bold mb-3">Exercice d'application :</h5>
                <div class="p-4 bg-gray-50 rounded-lg">
                    <p class="mb-3">Identifiez le mode dans les phrases suivantes :</p>
                    <div class="space-y-2">
                        <div class="p-2 border rounded">
                            <p>"Mange tes l√©gumes !" ‚Üí Mode : <select class="ml-2 p-1 border rounded text-base">
                                <option value="">Choisir...</option>
                                <option value="imperatif">Imp√©ratif</option>
                                <option value="indicatif">Indicatif</option>
                                <option value="subjonctif">Subjonctif</option>
                            </select></p>
                        </div>
                        <div class="p-2 border rounded">
                            <p>"Je voudrais un caf√©" ‚Üí Mode : <select class="ml-2 p-1 border rounded text-base">
                                <option value="">Choisir...</option>
                                <option value="conditionnel">Conditionnel</option>
                                <option value="indicatif">Indicatif</option>
                                <option value="subjonctif">Subjonctif</option>
                            </select></p>
                        </div>
                    </div>
                    <button class="btn btn-primary mt-4" onclick="checkModeExercise()">V√©rifier les r√©ponses</button>
                    <div id="mode-exercise-feedback" class="mt-4"></div>
                </div>
            `;

            explanationContainer.classList.remove('hidden');
            explanationContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function checkModeExercise() {
            const selects = document.querySelectorAll('#mode-exercises select');
            const answers = ['imperatif', 'conditionnel'];
            let correct = 0;

            selects.forEach((select, index) => {
                if (select.value === answers[index]) {
                    correct++;
                    select.style.backgroundColor = '#d4edda';
                } else {
                    select.style.backgroundColor = '#f8d7da';
                }
            });

            const feedback = document.getElementById('mode-exercise-feedback');
            feedback.innerHTML = `<p class="font-bold">${correct}/${answers.length} bonnes r√©ponses</p>`;
            feedback.className = correct === answers.length ? 'text-green-600' : 'text-orange-600';
        }

        // Vocabulary functions
        function exploreVocabularyThemes() {
            document.getElementById('vocabulary-themes-extended').classList.remove('hidden');
        }

        function loadTheme(themeName) {
            const theme = vocabularyData[themeName];
            if (!theme) return;

            const contentContainer = document.getElementById('theme-content');
            const headerElement = document.getElementById('theme-header');
            const wordsElement = document.getElementById('theme-words');

            headerElement.innerHTML = `
                <div class="text-4xl mb-2">${theme.icon}</div>
                <h3 class="text-2xl font-bold capitalize">${themeName}</h3>
                <p class="text-gray-600">${theme.words.length} mots √† d√©couvrir</p>
            `;

            wordsElement.innerHTML = '';
            theme.words.forEach((word, index) => {
                const wordTag = document.createElement('span');
                wordTag.className = 'word-tag';
                wordTag.textContent = word;
                wordTag.onclick = () => pronounceWord(word);
                wordTag.style.cursor = 'pointer';
                wordTag.title = 'Cliquez pour √©couter la prononciation';
                wordTag.style.animationDelay = `${index * 0.05}s`;
                wordTag.classList.add('animate-slide-in');
                wordsElement.appendChild(wordTag);
            });

            // Store current theme for quiz
            window.currentTheme = theme;
            window.currentThemeName = themeName;

            contentContainer.classList.remove('hidden');
            contentContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function pronounceWord(word) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(word);
                utterance.lang = 'fr-FR';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        function startThemeQuiz() {
            if (!window.currentTheme) return;
            
            // Create quiz from current theme
            const words = window.currentTheme.words;
            const quizWords = words.slice(0, 10); // Take first 10 words for quiz
            
            showCustomModal({
                title: `Quiz - ${window.currentThemeName}`,
                content: `
                    <div id="theme-quiz-container">
                        <div id="theme-quiz-progress" class="mb-4">
                            <div class="flex justify-between text-sm mb-1">
                                <span>Question <span id="current-q">1</span> sur ${quizWords.length}</span>
                                <span>Score: <span id="current-score">0</span></span>
                            </div>
                            <div class="w-full bg-gray-200 rounded-full h-2">
                                <div id="theme-quiz-bar" class="bg-blue-600 h-2 rounded-full" style="width: ${100/quizWords.length}%"></div>
                            </div>
                        </div>
                        <div id="theme-quiz-question" class="text-lg font-bold mb-4"></div>
                        <div id="theme-quiz-options" class="space-y-2"></div>
                        <div id="theme-quiz-feedback" class="mt-4"></div>
                    </div>
                `,
                onShow: () => startThemeQuizLogic(quizWords)
            });
        }

        function startThemeQuizLogic(words) {
            window.themeQuizData = {
                words: words,
                currentIndex: 0,
                score: 0,
                totalQuestions: words.length
            };
            
            loadThemeQuizQuestion();
        }

        function loadThemeQuizQuestion() {
            const data = window.themeQuizData;
            if (data.currentIndex >= data.totalQuestions) {
                showThemeQuizResults();
                return;
            }

            const correctWord = data.words[data.currentIndex];
            const otherWords = data.words.filter(w => w !== correctWord);
            const options = [correctWord, ...otherWords.sort(() => 0.5 - Math.random()).slice(0, 2)]
                .sort(() => 0.5 - Math.random());

            const definition = getWordDefinition(correctWord);
            
            document.getElementById('theme-quiz-question').textContent = 
                `Quel mot correspond √† cette d√©finition : "${definition}" ?`;
            
            const optionsContainer = document.getElementById('theme-quiz-options');
            optionsContainer.innerHTML = '';
            
            options.forEach(option => {
                const button = document.createElement('button');
                button.className = 'w-full p-3 text-left bg-gray-100 hover:bg-blue-100 rounded-lg transition-colors text-base';
                button.textContent = option;
                button.onclick = () => checkThemeQuizAnswer(option, correctWord);
                optionsContainer.appendChild(button);
            });

            // Update progress
            document.getElementById('current-q').textContent = data.currentIndex + 1;
            document.getElementById('current-score').textContent = data.score;
            const progress = ((data.currentIndex + 1) / data.totalQuestions) * 100;
            document.getElementById('theme-quiz-bar').style.width = `${progress}%`;
        }

        function getWordDefinition(word) {
            // Simple definitions for common words
            const definitions = {
                'pain': 'aliment de base fait de farine',
                'eau': 'liquide transparent et inodore',
                'maison': 'b√¢timent o√π l\'on habite',
                'p√®re': 'parent masculin',
                'm√®re': 'parent f√©minin',
                'chien': 'animal domestique fid√®le',
                'chat': 'petit f√©lin domestique',
                'voiture': 'v√©hicule automobile',
                '√©cole': '√©tablissement d\'enseignement',
                'livre': 'ouvrage imprim√©',
                'table': 'meuble avec un plateau',
                'chaise': 'si√®ge avec dossier',
                'fen√™tre': 'ouverture dans un mur',
                'porte': 'panneau mobile pour fermer',
                'jardin': 'terrain cultiv√© pr√®s d\'une maison',
                'fromage': 'produit laitier ferment√©',
                'lait': 'liquide blanc produit par les mammif√®res',
                'football': 'sport avec un ballon rond',
                'tennis': 'sport avec une raquette',
                'soleil': '√©toile du syst√®me solaire',
                'lune': 'satellite naturel de la Terre'
            };
            
            return definitions[word] || `terme du vocabulaire "${window.currentThemeName}"`;
        }

        function checkThemeQuizAnswer(userAnswer, correctAnswer) {
            const data = window.themeQuizData;
            const feedback = document.getElementById('theme-quiz-feedback');
            
            if (userAnswer === correctAnswer) {
                data.score++;
                feedback.innerHTML = '<p class="text-green-600 font-bold">‚úÖ Correct !</p>';
                feedback.className = 'mt-4 p-3 bg-green-50 rounded-lg';
            } else {
                feedback.innerHTML = `<p class="text-red-600 font-bold">‚ùå Incorrect. La bonne r√©ponse √©tait : ${correctAnswer}</p>`;
                feedback.className = 'mt-4 p-3 bg-red-50 rounded-lg';
            }

            // Disable all buttons
            document.querySelectorAll('#theme-quiz-options button').forEach(btn => {
                btn.disabled = true;
                btn.style.opacity = '0.6';
            });

            setTimeout(() => {
                data.currentIndex++;
                loadThemeQuizQuestion();
            }, 2000);
        }

        function showThemeQuizResults() {
            const data = window.themeQuizData;
            const percentage = Math.round((data.score / data.totalQuestions) * 100);
            
            let message = `Quiz termin√© !\nScore: ${data.score}/${data.totalQuestions} (${percentage}%)`;
            if (percentage >= 80) message += '\nüéâ Excellent !';
            else if (percentage >= 60) message += '\nüëç Bien jou√© !';
            else message += '\nüí™ Continuez √† apprendre !';

            document.getElementById('theme-quiz-container').innerHTML = `
                <div class="text-center">
                    <h3 class="text-xl font-bold mb-4">R√©sultats du Quiz</h3>
                    <div class="text-lg">${message.replace(/\n/g, '<br>')}</div>
                    <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                </div>
            `;
        }

        function playMemoryGame() {
            if (!window.currentTheme) return;
            
            const words = window.currentTheme.words.slice(0, 8); // 8 pairs
            const pairs = [...words, ...words].sort(() => 0.5 - Math.random());
            
            showCustomModal({
                title: `Jeu de M√©moire - ${window.currentThemeName}`,
                content: `
                    <div id="memory-game-container" class="text-center">
                        <div id="memory-score" class="mb-4">
                            <span>Paires trouv√©es: <strong id="pairs-found">0</strong> / ${words.length}</span>
                            <span class="ml-4">Essais: <strong id="attempts">0</strong></span>
                        </div>
                        <div id="memory-grid" class="memory-grid mx-auto"></div>
                        <div id="memory-feedback" class="mt-4"></div>
                    </div>
                `,
                onShow: () => startMemoryGameLogic(pairs, words.length)
            });
        }

        function startMemoryGameLogic(cards, totalPairs) {
            window.memoryGame = {
                cards: cards,
                flipped: [],
                matched: [],
                attempts: 0,
                pairsFound: 0,
                totalPairs: totalPairs
            };

            const grid = document.getElementById('memory-grid');
            grid.innerHTML = '';
            
            cards.forEach((word, index) => {
                const card = document.createElement('div');
                card.className = 'memory-card';
                card.dataset.word = word;
                card.dataset.index = index;
                card.textContent = '?';
                card.onclick = () => flipMemoryCard(card, word);
                grid.appendChild(card);
            });
        }

        function flipMemoryCard(card, word) {
            const game = window.memoryGame;
            
            if (game.flipped.length >= 2 || card.classList.contains('flipped') || game.matched.includes(card.dataset.index)) {
                return;
            }

            card.classList.add('flipped');
            card.textContent = word;
            game.flipped.push({card, word, index: card.dataset.index});

            if (game.flipped.length === 2) {
                game.attempts++;
                document.getElementById('attempts').textContent = game.attempts;

                setTimeout(() => checkMemoryMatch(), 1000);
            }
        }

        function checkMemoryMatch() {
            const game = window.memoryGame;
            const [first, second] = game.flipped;

            if (first.word === second.word) {
                // Match found
                game.matched.push(first.index, second.index);
                game.pairsFound++;
                document.getElementById('pairs-found').textContent = game.pairsFound;
                
                first.card.style.backgroundColor = '#10b981';
                second.card.style.backgroundColor = '#10b981';

                if (game.pairsFound === game.totalPairs) {
                    setTimeout(() => {
                        document.getElementById('memory-feedback').innerHTML = 
                            `<p class="text-green-600 font-bold text-lg">üéâ F√©licitations ! Vous avez trouv√© toutes les paires en ${game.attempts} essais !</p>`;
                    }, 500);
                }
            } else {
                // No match
                setTimeout(() => {
                    first.card.classList.remove('flipped');
                    second.card.classList.remove('flipped');
                    first.card.textContent = '?';
                    second.card.textContent = '?';
                }, 500);
            }

            game.flipped = [];
        }

        // AI Conversation
        function startAIConversation() {
            document.getElementById('ai-conversation').classList.remove('hidden');
        }

        function sendAIMessage() {
            const input = document.getElementById('ai-input');
            const message = input.value.trim();
            if (!message) return;

            const messagesContainer = document.getElementById('ai-messages');
            
            // Add user message
            const userMessage = document.createElement('div');
            userMessage.className = 'chatbot-message user';
            userMessage.textContent = message;
            messagesContainer.appendChild(userMessage);
            
            input.value = '';
            messagesContainer.scrollTop = messagesContainer.scrollHeight;

            // Generate AI response
            setTimeout(() => {
                const botResponse = generateAIResponse(message);
                const botMessage = document.createElement('div');
                botMessage.className = 'chatbot-message bot';
                botMessage.innerHTML = botResponse;
                messagesContainer.appendChild(botMessage);
                messagesContainer.scrollTop = messagesContainer.scrollHeight;
            }, 1000);
        }

        function generateAIResponse(message) {
            const responses = {
                conjugation: {
                    patterns: ['conjuguer', 'conjugaison', 'verbe', 'temps', 'pr√©sent', 'pass√©', 'futur'],
                    responses: [
                        "La conjugaison fran√ßaise suit des r√®gles pr√©cises. Les verbes du 1er groupe (-er) sont les plus r√©guliers. Voulez-vous que je vous explique un temps en particulier ?",
                        "Pour bien conjuguer, il faut d'abord identifier le groupe du verbe : 1er (-er), 2e (-ir avec -issons), 3e (irr√©guliers). Quel verbe vous pose probl√®me ?",
                        "Les temps les plus importants √† ma√Ætriser sont : pr√©sent, pass√© compos√©, imparfait et futur. Sur lequel voulez-vous vous exercer ?"
                    ]
                },
                orthography: {
                    patterns: ['orthographe', '√©crire', 'faute', 'accent', 'homophone'],
                    responses: [
                        "L'orthographe fran√ßaise a ses difficult√©s, mais avec de la pratique, on progresse ! Les accents (√©, √®, √™) et les homophones (√†/a, et/est) sont souvent probl√©matiques.",
                        "Pour am√©liorer votre orthographe, je recommande : 1) Lire beaucoup, 2) Faire des dict√©es, 3) Apprendre les r√®gles principales. Quelle difficult√© rencontrez-vous ?",
                        "Les mots fr√©quents mal orthographi√©s incluent : 'd√©veloppement', '√©v√©nement', 'diff√©rent'. Voulez-vous que je vous propose des exercices ?"
                    ]
                },
                grammar: {
                    patterns: ['grammaire', 'accord', 'participe', 'sujet', 'compl√©ment'],
                    responses: [
                        "La grammaire structure notre langue. Les accords (sujet-verbe, adjectif-nom) et les fonctions (sujet, COD, COI) sont essentiels. Quel point vous int√©resse ?",
                        "Pour analyser une phrase, identifiez d'abord le verbe, puis le sujet (qui fait l'action ?), puis les compl√©ments. Voulez-vous un exemple ?",
                        "L'accord du participe pass√© d√©pend de l'auxiliaire : avec '√™tre', il s'accorde avec le sujet ; avec 'avoir', c'est plus complexe. Besoin d'exemples ?"
                    ]
                },
                vocabulary: {
                    patterns: ['vocabulaire', 'mot', 'sens', 'd√©finition', 'synonyme'],
                    responses: [
                        "Enrichir son vocabulaire demande de la r√©gularit√©. Lisez vari√©, notez les mots nouveaux, utilisez-les en contexte. Quel th√®me vous int√©resse ?",
                        "Les champs lexicaux aident √† m√©moriser : famille, maison, nature... Associer les mots par th√®me facilite l'apprentissage. Voulez-vous explorer un th√®me ?",
                        "Pour retenir un mot nouveau : 1) Comprendre son sens, 2) L'utiliser dans une phrase, 3) Le r√©viser r√©guli√®rement. Quel mot vous pose probl√®me ?"
                    ]
                },
                games: {
                    patterns: ['jeu', 'jouer', 'quiz', 'exercice', 'activit√©'],
                    responses: [
                        "Les jeux sont excellents pour apprendre ! Nous avons des quiz, des jeux de m√©moire, des dict√©es interactives... Quel type d'activit√© pr√©f√©rez-vous ?",
                        "L'apprentissage ludique am√©liore la r√©tention. Essayez nos jeux de vocabulaire par th√®me ou nos quiz de conjugaison adaptatifs !",
                        "Voulez-vous jouer ? Je peux vous proposer des anagrammes, des cha√Ænes de mots, ou des quiz personnalis√©s selon votre niveau."
                    ]
                },
                default: [
                    "C'est une excellente question ! En fran√ßais, chaque r√®gle a ses nuances. Pouvez-vous √™tre plus pr√©cis sur ce qui vous int√©resse ?",
                    "Je suis l√† pour vous aider avec tous les aspects du fran√ßais : conjugaison, orthographe, grammaire, vocabulaire. Que voulez-vous approfondir ?",
                    "L'apprentissage du fran√ßais est un voyage passionnant ! Chaque difficult√© est une opportunit√© de progresser. Quel d√©fi voulez-vous relever ?",
                    "N'h√©sitez pas √† me poser des questions sp√©cifiques ! Je peux vous expliquer des r√®gles, corriger des erreurs, ou cr√©er des exercices personnalis√©s.",
                    "Formidable ! Continuez √† pratiquer r√©guli√®rement. La cl√© du succ√®s en fran√ßais, c'est la pers√©v√©rance. Sur quoi travaillons-nous ensemble ?"
                ]
            };

            // Find matching category
            for (const [category, data] of Object.entries(responses)) {
                if (category !== 'default' && data.patterns.some(pattern => 
                    message.toLowerCase().includes(pattern))) {
                    return data.responses[Math.floor(Math.random() * data.responses.length)];
                }
            }

            return responses.default[Math.floor(Math.random() * responses.default.length)];
        }

        function handleEnterPress(event) {
            if (event.key === 'Enter') {
                sendAIMessage();
            }
        }

        // Content Generator functions
        function generateContent(type) {
            document.getElementById('content-options').classList.remove('hidden');
            window.selectedContentType = type;
        }

        function createContent() {
            const level = document.getElementById('content-level').value;
            const theme = document.getElementById('content-theme').value;
            const type = window.selectedContentType;

            const generatedContainer = document.getElementById('generated-content');
            const resultContainer = document.getElementById('content-result');

            // Simulate content generation
            let content = '';
            switch(type) {
                case 'story':
                    content = generateStory(level, theme);
                    break;
                case 'exercises':
                    content = generateExercises(level, theme);
                    break;
                case 'poem':
                    content = generatePoem(level, theme);
                    break;
                case 'dialogue':
                    content = generateDialogue(level, theme);
                    break;
            }

            resultContainer.innerHTML = content;
            generatedContainer.classList.remove('hidden');
            generatedContainer.scrollIntoView({ behavior: 'smooth' });
        }

        function generateStory(level, theme) {
            const stories = {
                debutant: {
                    aventure: "Il √©tait une fois un petit gar√ßon nomm√© Tom. Tom aimait explorer. Un jour, il trouve une carte myst√©rieuse dans le grenier de sa grand-m√®re. La carte montre un tr√©sor cach√© dans la for√™t pr√®s de sa maison. Tom prend son sac √† dos et part √† l'aventure. Dans la for√™t, il rencontre un √©cureuil qui lui montre le chemin. Finalement, Tom trouve le tr√©sor : une bo√Æte pleine de photos anciennes de sa famille.",
                    quotidien: "Marie se r√©veille √† sept heures. Elle prend son petit-d√©jeuner : du pain avec de la confiture et un verre de lait. Puis elle se brosse les dents et s'habille pour l'√©cole. √Ä l'√©cole, elle apprend les math√©matiques et le fran√ßais. √Ä midi, elle mange √† la cantine avec ses amis. L'apr√®s-midi, elle fait du sport. Le soir, elle rentre √† la maison, fait ses devoirs et d√Æne avec sa famille.",
                    fantastique: "Dans un ch√¢teau magique vivait une petite f√©e nomm√©e Luna. Elle avait des ailes brillantes et une baguette dor√©e. Chaque nuit, Luna aidait les enfants √† avoir de beaux r√™ves. Un soir, elle d√©couvre qu'un m√©chant sorcier vole les r√™ves. Luna d√©cide de l'arr√™ter. Avec l'aide de ses amis les animaux, elle trouve le sorcier et lui reprend tous les r√™ves vol√©s.",
                    science: "Paul adore les √©toiles. Avec son t√©lescope, il observe le ciel chaque soir. Un jour, il voit quelque chose d'√©trange : une lumi√®re qui bouge. Paul pense que c'est peut-√™tre un satellite ou la station spatiale. Il prend des photos et les montre √† son professeur. Ensemble, ils d√©couvrent que c'est effectivement la station spatiale internationale qui passe au-dessus de leur ville."
                },
                intermediaire: {
                    aventure: "L'explorateur Jacques Durand venait de d√©couvrir une ancienne civilisation perdue dans la jungle amazonienne. Les symboles grav√©s sur les pierres ressemblaient √† ceux qu'il avait √©tudi√©s pendant des ann√©es. Soudain, il entendit un bruit √©trange venant des profondeurs du temple. Son c≈ìur battait rapidement alors qu'il s'avan√ßait prudemment, sa lampe de poche √† la main. Ce qu'il d√©couvrit allait changer sa vie √† jamais : une chambre secr√®te remplie d'art√©facts pr√©colombiens parfaitement conserv√©s.",
                    quotidien: "Chaque matin, Sylvie prend le m√©tro pour se rendre au bureau. Pendant le trajet, elle lit les actualit√©s sur son t√©l√©phone et planifie sa journ√©e de travail. Arriv√©e au bureau, elle consulte ses emails et participe √† plusieurs r√©unions. Le d√©jeuner est souvent pris rapidement √† son bureau en travaillant sur ses dossiers. L'apr√®s-midi est consacr√© aux projets en cours et aux appels clients. Le soir, elle retrouve des amis pour boire un verre ou rentre directement chez elle pour se d√©tendre devant un bon livre.",
                    fantastique: "Dans le royaume d'Aetheria, la magie commen√ßait √† dispara√Ætre myst√©rieusement. La jeune magicienne √âlara remarqua que ses sorts perdaient de leur puissance jour apr√®s jour. D√©termin√©e √† d√©couvrir la cause de ce ph√©nom√®ne, elle entreprit un voyage p√©rilleux vers la Source Primordiale, le c≈ìur magique du royaume. En chemin, elle rencontra un dragon sage qui lui r√©v√©la qu'un ancien sortil√®ge avait √©t√© bris√©, lib√©rant une force obscure qui d√©vorait la magie du monde.",
                    science: "Le laboratoire de recherche spatiale bruissait d'activit√©. L'√©quipe du Dr Martin avait d√©tect√© un signal radio inhabituel en provenance d'une galaxie lointaine. Contrairement aux signaux naturels habituels, celui-ci pr√©sentait des motifs r√©p√©titifs et structur√©s qui sugg√©raient une origine artificielle. Apr√®s des semaines d'analyse, les scientifiques commen√ßaient √† envisager l'impensable : ils avaient peut-√™tre intercept√© la premi√®re preuve d'une intelligence extraterrestre."
                },
                avance: {
                    aventure: "Au c≈ìur des montagnes de l'Himalaya, l'alpiniste chevronn√©e Sarah McKenzie se trouvait confront√©e au d√©fi de sa vie. La temp√™te de neige qui s'abattait sur elle depuis trois jours avait transform√© son exp√©dition en lutte pour la survie. Ses provisions s'amenuisaient, et la visibilit√© quasi nulle rendait impossible toute progression vers le camp de base. Pourtant, quelque chose dans ces montagnes myst√©rieuses l'appelait, une force ancienne qu'elle ne parvenait pas √† expliquer rationnellement. Lorsque les nuages se dissip√®rent enfin, elle aper√ßut au loin une structure qui ne figurait sur aucune carte.",
                    quotidien: "Dans cette √©poque d'hyperconnectivit√©, Marc, consultant en transformation digitale, jonglait entre les fuseaux horaires et les cultures d'entreprise. Sa journ√©e type commen√ßait √† 6h par une visioconf√©rence avec Tokyo, se poursuivait par des analyses de donn√©es pour ses clients europ√©ens, et se terminait souvent tard le soir par des pr√©sentations strat√©giques pour ses partenaires am√©ricains. Cette vie tr√©pidante, bien qu'enrichissante intellectuellement, commen√ßait √† peser sur sa vie personnelle. Il r√©fl√©chissait de plus en plus √† un r√©√©quilibrage, cherchant un moyen de concilier ambition professionnelle et √©panouissement personnel."
                }
            };

            return stories[level]?.[theme] || "Histoire en cours de g√©n√©ration...";
        }

        function generateExercises(level, theme) {
            const exercises = {
                debutant: `
                    <h4>Exercices de ${level} - Th√®me: ${theme}</h4>
                    <div class="space-y-4 mt-4">
                        <div class="p-4 border rounded">
                            <strong>Exercice 1:</strong> Compl√©tez les phrases avec le mot appropri√©.
                            <p class="mt-2">1. Le _____ explore la jungle. (explorateur/exploration)</p>
                            <p>2. Marie _____ son petit-d√©jeuner. (prend/prendre)</p>
                            <p>3. Le tr√©sor est _____ dans la for√™t. (cach√©/cacher)</p>
                        </div>
                        <div class="p-4 border rounded">
                            <strong>Exercice 2:</strong> Conjuguez les verbes entre parenth√®ses au pr√©sent.
                            <p class="mt-2">1. Tom (partir) _____ √† l'aventure.</p>
                            <p>2. Nous (d√©couvrir) _____ un secret.</p>
                            <p>3. Elle (se r√©veiller) _____ t√¥t le matin.</p>
                        </div>
                        <div class="p-4 border rounded">
                            <strong>Exercice 3:</strong> Choisissez la bonne orthographe.
                            <p class="mt-2">1. Il fait (beau/bo) aujourd'hui.</p>
                            <p>2. Les (enfant/enfants) jouent.</p>
                            <p>3. Ma (m√®re/mer) cuisine bien.</p>
                        </div>
                    </div>
                `,
                intermediaire: `
                    <h4>Exercices de ${level} - Th√®me: ${theme}</h4>
                    <div class="space-y-4 mt-4">
                        <div class="p-4 border rounded">
                            <strong>Exercice 1:</strong> Accordez le participe pass√©.
                            <p class="mt-2">1. Les d√©couvertes qu'il a fait___ sont importantes.</p>
                            <p>2. Elle s'est lev√©___ t√¥t ce matin.</p>
                            <p>3. Les lettres que j'ai √©crit___ sont parties.</p>
                        </div>
                        <div class="p-4 border rounded">
                            <strong>Exercice 2:</strong> Conjuguez au temps appropri√©.
                            <p class="mt-2">1. Si j'avais plus de temps, je (voyager) _____ davantage.</p>
                            <p>2. Quand tu (arriver) _____ demain, appelle-moi.</p>
                            <p>3. Il faut que vous (√™tre) _____ √† l'heure.</p>
                        </div>
                        <div class="p-4 border rounded">
                            <strong>Exercice 3:</strong> Analysez la fonction des mots soulign√©s.
                            <p class="mt-2">1. <u>L'explorateur</u> d√©couvre <u>un temple</u>.</p>
                            <p>2. <u>Prudemment</u>, il avance dans <u>l'obscurit√©</u>.</p>
                        </div>
                    </div>
                `,
                avance: `
                    <h4>Exercices de ${level} - Th√®me: ${theme}</h4>
                    <div class="space-y-4 mt-4">
                        <div class="p-4 border rounded">
                            <strong>Exercice 1:</strong> R√©√©crivez en √©vitant les r√©p√©titions.
                            <p class="mt-2">"Sarah McKenzie √©tait une alpiniste. Sarah McKenzie √©tait exp√©riment√©e. Sarah McKenzie gravissait la montagne. La montagne √©tait dangereuse."</p>
                        </div>
                        <div class="p-4 border rounded">
                            <strong>Exercice 2:</strong> Transformez les phrases en utilisant le subjonctif.
                            <p class="mt-2">1. Il partira demain. ‚Üí Je doute qu'il...</p>
                            <p>2. Vous r√©ussirez. ‚Üí Il faut que vous...</p>
                            <p>3. Tu comprends. ‚Üí Je ne pense pas que tu...</p>
                        </div>
                        <div class="p-4 border rounded">
                            <strong>Exercice 3:</strong> Identifiez les figures de style.
                            <p class="mt-2">1. "La montagne l'appelait"</p>
                            <p>2. "Un silence de mort r√©gnait"</p>
                            <p>3. "Ses yeux brillaient comme des √©toiles"</p>
                        </div>
                    </div>
                `
            };

            return exercises[level] || exercises.debutant;
        }

        function generatePoem(level, theme) {
            const poems = {
                debutant: `
                    <h4>Po√®me simple - ${theme}</h4>
                    <div class="mt-4 italic">
                        <p>Dans la for√™t myst√©rieuse,</p>
                        <p>Tom marche courageusement.</p>
                        <p>Il cherche le tr√©sor pr√©cieux,</p>
                        <p>Guid√© par l'√©cureuil gentiment.</p>
                        <br>
                        <p>La nature est merveilleuse,</p>
                        <p>Les arbres dansent doucement.</p>
                        <p>L'aventure est fabuleuse,</p>
                        <p>Tom sourit joyeusement.</p>
                    </div>
                `,
                intermediaire: `
                    <h4>Po√®me √©labor√© - ${theme}</h4>
                    <div class="mt-4 italic">
                        <p>Dans les m√©andres du temps qui passe,</p>
                        <p>L'explorateur trace sa voie,</p>
                        <p>Chaque d√©couverte efface</p>
                        <p>Les doutes qui troublaient sa foi.</p>
                        <br>
                        <p>La jungle garde ses myst√®res,</p>
                        <p>Comme un livre aux pages scell√©es,</p>
                        <p>Mais l'homme pers√©v√®re</p>
                        <p>Pour voir ses r√™ves r√©v√©l√©s.</p>
                    </div>
                `,
                avance: `
                    <h4>Po√®me sophistiqu√© - ${theme}</h4>
                    <div class="mt-4 italic">
                        <p>Au sommet des cimes enneig√©es,</p>
                        <p>O√π l'air se rar√©fie et br√ªle,</p>
                        <p>L'alpiniste aux forces m√©nag√©es</p>
                        <p>Affronte la montagne qui hurle.</p>
                        <br>
                        <p>Dans ce th√©√¢tre de glace et de pierre,</p>
                        <p>O√π chaque pas d√©fie l'ab√Æme,</p>
                        <p>Se r√©v√®le la nature premi√®re</p>
                        <p>De l'homme face au sublime.</p>
                        <br>
                        <p>Car au-del√† des temp√™tes blanches,</p>
                        <p>R√©sonne l'appel ancestral</p>
                        <p>Qui vers les hauteurs nous penche</p>
                        <p>En qu√™te de l'id√©al.</p>
                    </div>
                `
            };

            return poems[level] || poems.debutant;
        }

        function generateDialogue(level, theme) {
            const dialogues = {
                debutant: `
                    <h4>Dialogue simple - ${theme}</h4>
                    <div class="mt-4 space-y-2">
                        <p><strong>Tom :</strong> Grand-m√®re, qu'est-ce que c'est que cette vieille carte ?</p>
                        <p><strong>Grand-m√®re :</strong> Oh, c'est une carte tr√®s sp√©ciale, mon petit. Ton grand-p√®re l'avait dessin√©e.</p>
                        <p><strong>Tom :</strong> Elle montre un tr√©sor ! Est-ce que je peux le chercher ?</p>
                        <p><strong>Grand-m√®re :</strong> Bien s√ªr, mais sois prudent. La for√™t peut √™tre dangereuse.</p>
                        <p><strong>Tom :</strong> Je promets d'√™tre tr√®s prudent ! Merci grand-m√®re !</p>
                        <p><strong>Grand-m√®re :</strong> Bonne chance dans ton aventure, mon ch√©ri.</p>
                    </div>
                `,
                intermediaire: `
                    <h4>Dialogue √©labor√© - ${theme}</h4>
                    <div class="mt-4 space-y-2">
                        <p><strong>Jacques :</strong> Professeur Martinez, vous devez voir ce que j'ai d√©couvert dans la jungle !</p>
                        <p><strong>Prof. Martinez :</strong> Calmez-vous, Jacques. Expliquez-moi clairement ce qui s'est pass√©.</p>
                        <p><strong>Jacques :</strong> J'ai trouv√© un temple pr√©colombien intact ! Les symboles correspondent exactement √† nos recherches.</p>
                        <p><strong>Prof. Martinez :</strong> C'est extraordinaire ! Avez-vous pris des photos ? Document√© la position GPS ?</p>
                        <p><strong>Jacques :</strong> Bien s√ªr. Mais ce n'est pas tout... Il y a quelque chose d'√©trange √† l'int√©rieur.</p>
                        <p><strong>Prof. Martinez :</strong> Que voulez-vous dire par "√©trange" ?</p>
                        <p><strong>Jacques :</strong> Les art√©facts semblent avoir √©t√© pr√©serv√©s par une technologie inconnue...</p>
                    </div>
                `,
                avance: `
                    <h4>Dialogue sophistiqu√© - ${theme}</h4>
                    <div class="mt-4 space-y-2">
                        <p><strong>Sarah :</strong> Base camp, ici Sarah. Ma position est compromise. La temp√™te a d√©truit mes rep√®res.</p>
                        <p><strong>Coordinateur :</strong> Sarah, nous vous recevons faiblement. Pouvez-vous nous donner votre position approximative ?</p>
                        <p><strong>Sarah :</strong> N√©gatif. GPS hors service depuis hier. Mais j'ai aper√ßu une structure inhabituelle au nord-est.</p>
                        <p><strong>Coordinateur :</strong> Une structure ? Sarah, il n'y a rien de r√©f√©renc√© dans cette zone selon nos cartes.</p>
                        <p><strong>Sarah :</strong> C'est bien ce qui m'inqui√®te... ou m'intrigue. L'architecture ne correspond √† rien de connu.</p>
                        <p><strong>Coordinateur :</strong> Sarah, votre priorit√© doit √™tre la survie. Cherchez un abri et attendez l'accalmie.</p>
                        <p><strong>Sarah :</strong> Compris, mais cette d√©couverte pourrait r√©volutionner notre compr√©hension de cette r√©gion...</p>
                    </div>
                `
            };

            return dialogues[level] || dialogues.debutant;
        }

        function analyzeContent() {
            const content = document.getElementById('content-result').textContent;
            showCustomModal({
                title: 'Analyse du contenu g√©n√©r√©',
                content: `
                    <div class="space-y-4">
                        <div class="grid grid-cols-2 gap-4">
                            <div class="p-4 bg-blue-50 rounded">
                                <h5 class="font-bold">Statistiques</h5>
                                <p>Mots: ${content.split(' ').length}</p>
                                <p>Phrases: ${content.split('.').length - 1}</p>
                                <p>Caract√®res: ${content.length}</p>
                            </div>
                            <div class="p-4 bg-green-50 rounded">
                                <h5 class="font-bold">Niveau estim√©</h5>
                                <p>Difficult√©: ${content.length > 500 ? 'Avanc√©' : content.length > 200 ? 'Interm√©diaire' : 'D√©butant'}</p>
                                <p>Lisibilit√©: Bonne</p>
                            </div>
                        </div>
                        <div class="p-4 bg-yellow-50 rounded">
                            <h5 class="font-bold">Points d'apprentissage</h5>
                            <ul class="list-disc list-inside">
                                <li>Vocabulaire vari√© adapt√© au niveau</li>
                                <li>Structure narrative claire</li>
                                <li>Temps verbaux coh√©rents</li>
                                <li>Progression logique de l'histoire</li>
                            </ul>
                        </div>
                    </div>
                `
            });
        }

        function analyzeText() {
            const text = document.getElementById('text-to-analyze').value;
            if (!text.trim()) {
                showFeedback('Veuillez saisir un texte √† analyser.', 'warning');
                return;
            }

            const analysis = performTextAnalysis(text);
            
            document.getElementById('text-stats').innerHTML = `
                <p>Mots: ${analysis.wordCount}</p>
                <p>Phrases: ${analysis.sentenceCount}</p>
                <p>Caract√®res: ${analysis.charCount}</p>
                <p>Paragraphes: ${analysis.paragraphCount}</p>
            `;

            document.getElementById('difficulty-level').innerHTML = `
                <div class="text-lg font-bold ${analysis.difficulty.color}">${analysis.difficulty.level}</div>
                <p class="text-sm">${analysis.difficulty.description}</p>
            `;

            document.getElementById('improvement-suggestions').innerHTML = analysis.suggestions
                .map(s => `<p>‚Ä¢ ${s}</p>`).join('');

            document.getElementById('detected-errors').innerHTML = analysis.errors.length > 0
                ? analysis.errors.map(e => `<p class="text-red-600">‚Ä¢ ${e}</p>`).join('')
                : '<p class="text-green-600">Aucune erreur majeure d√©tect√©e.</p>';

            document.getElementById('analysis-results').classList.remove('hidden');
        }

        function performTextAnalysis(text) {
            const words = text.split(/\s+/).filter(w => w.length > 0);
            const sentences = text.split(/[.!?]+/).filter(s => s.trim().length > 0);
            const paragraphs = text.split(/\n\s*\n/).filter(p => p.trim().length > 0);

            const avgWordsPerSentence = words.length / sentences.length;
            const avgCharsPerWord = text.replace(/\s/g, '').length / words.length;

            let difficulty;
            if (avgWordsPerSentence > 20 || avgCharsPerWord > 6) {
                difficulty = { level: 'Avanc√©', color: 'text-red-600', description: 'Texte complexe avec phrases longues' };
            } else if (avgWordsPerSentence > 12 || avgCharsPerWord > 5) {
                difficulty = { level: 'Interm√©diaire', color: 'text-yellow-600', description: 'Difficult√© mod√©r√©e' };
            } else {
                difficulty = { level: 'D√©butant', color: 'text-green-600', description: 'Texte accessible' };
            }

            const suggestions = [
                avgWordsPerSentence > 25 ? 'Consid√©rez raccourcir certaines phrases' : null,
                sentences.length < 3 ? 'Ajoutez plus de phrases pour d√©velopper vos id√©es' : null,
                words.length < 50 ? 'D√©veloppez davantage votre texte' : null,
                'Variez la structure de vos phrases',
                'Utilisez des connecteurs logiques'
            ].filter(Boolean);

            const errors = [];
            if (text.includes('  ')) errors.push('Espaces doubles d√©tect√©s');
            if (!/[.!?]$/.test(text.trim())) errors.push('Le texte ne se termine pas par une ponctuation');
            if (text.includes(',;')) errors.push('Ponctuation incorrecte d√©tect√©e');

            return {
                wordCount: words.length,
                sentenceCount: sentences.length,
                charCount: text.length,
                paragraphCount: paragraphs.length,
                difficulty,
                suggestions,
                errors
            };
        }

        // Modal and utility functions
        function showCustomModal({title, content, onShow}) {
            // Create modal backdrop
            const modal = document.createElement('div');
            modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4';
            modal.innerHTML = `
                <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
                    <div class="flex justify-between items-center p-6 border-b">
                        <h3 class="text-xl font-bold text-gray-900 dark:text-white">${title}</h3>
                        <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300">
                            <i class="fas fa-times text-xl"></i>
                        </button>
                    </div>
                    <div class="p-6">
                        ${content}
                    </div>
                </div>
            `;
            
            document.body.appendChild(modal);
            window.currentModal = modal;
            
            if (onShow) onShow();
            
            // Close on backdrop click
            modal.addEventListener('click', (e) => {
                if (e.target === modal) closeModal();
            });
        }

        function closeModal() {
            if (window.currentModal) {
                document.body.removeChild(window.currentModal);
                window.currentModal = null;
            }
        }

        // Utility functions
        function showFeedback(message, type) {
            const feedbackElement = document.getElementById('quiz-feedback');
            if (feedbackElement) {
                feedbackElement.textContent = message;
                feedbackElement.className = `quiz-feedback ${type}`;
            }
        }

        function showTensesOverview() {
            document.getElementById('tenses-overview').classList.remove('hidden');
        }

        function startVoiceTraining() {
            document.getElementById('voice-training').classList.remove('hidden');
            generateRandomWordToPronounce();
        }

        function startDictation() {
            document.getElementById('dictation-exercise').classList.remove('hidden');
            const sentences = [
                "Le chat mange sa nourriture.",
                "Les enfants jouent dans le jardin.",
                "Ma m√®re pr√©pare le d√Æner.",
                "Nous allons √† l'√©cole en bus.",
                "Il fait beau aujourd'hui.",
                "La voiture rouge roule vite.",
                "Je lis un livre int√©ressant.",
                "Elle chante une belle chanson.",
                "Nous √©tudions le fran√ßais.",
                "Ils habitent pr√®s de la mer."
            ];
            window.currentDictationSentence = sentences[Math.floor(Math.random() * sentences.length)];
            setupDictationAudio();
        }

        function showFrequentWords() {
            document.getElementById('frequent-words').classList.remove('hidden');
        }

        function showOrthographyRules() {
            document.getElementById('orthography-rules').classList.remove('hidden');
        }

        function startSpecializedLearning() {
            document.getElementById('specialized-learning').classList.remove('hidden');
        }

        function showAdvancedGames() {
            document.getElementById('advanced-games').classList.remove('hidden');
        }

        function showContentGenerator() {
            document.getElementById('content-generator').classList.remove('hidden');
        }

        function showTextAnalyzer() {
            document.getElementById('text-analyzer').classList.remove('hidden');
        }

        // Game functions (placeholders for advanced games)
        function startSpacedRepetition() {
            showCustomModal({
                title: 'R√©p√©tition Espac√©e',
                content: `
                    <div class="text-center">
                        <p class="mb-4">La r√©p√©tition espac√©e optimise la m√©morisation en r√©visant les mots au moment optimal.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function startAssociationGame() {
            showCustomModal({
                title: 'Jeu d\'Associations',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Cr√©ez des liens mn√©motechniques pour m√©moriser plus facilement.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function startContextualLearning() {
            showCustomModal({
                title: 'Apprentissage Contextuel',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Apprenez les mots dans leur contexte naturel d'utilisation.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function startVisualLearning() {
            showCustomModal({
                title: 'Apprentissage Visuel',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Utilisez la m√©moire visuelle pour une meilleure r√©tention.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function playWordChain() {
            showCustomModal({
                title: 'Cha√Æne de Mots',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Cr√©ez des cha√Ænes de mots en utilisant la derni√®re lettre du mot pr√©c√©dent.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function playAnagramGame() {
            showCustomModal({
                title: 'Jeu d\'Anagrammes',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Trouvez des mots en r√©arrangeant les lettres donn√©es.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function playDefinitionGuess() {
            showCustomModal({
                title: 'Devine la D√©finition',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Trouvez le mot qui correspond √† la d√©finition donn√©e.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        function playAdvancedMemory() {
            showCustomModal({
                title: 'Memory Avanc√©',
                content: `
                    <div class="text-center">
                        <p class="mb-4">Version avanc√©e du jeu de m√©moire avec d√©fis progressifs.</p>
                        <p>Cette fonctionnalit√© sera bient√¥t disponible !</p>
                        <button class="btn btn-primary mt-4" onclick="closeModal()">Fermer</button>
                    </div>
                `
            });
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            console.log('SOUMWEB - Plateforme d\'apprentissage du fran√ßais initialis√©e');
            
            // Initialize dark mode
            if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
                document.documentElement.classList.add('dark');
            }
        });
    </script>
</body>
</html>